import{a as w}from"./chunk-EDEC42IT.js";import{k as y,l as M,m as O}from"./chunk-7LMTQFKZ.js";import{Ca as C,Ga as f,K as v,Na as c,P as x,Pa as r,Qa as i,Ra as S,Sa as g,Ta as _,Ua as l,W as d,X as m,Za as I,_a as o,ab as u,qa as P,sa as a,xa as b}from"./chunk-3UVLN3EJ.js";import"./chunk-FK42CRUA.js";var h=class n{constructor(t){this.http=t}apiUrl="https://restcountries.com/v3.1/all";getPaises(){return this.http.get(this.apiUrl)}static \u0275fac=function(e){return new(e||n)(x(w))};static \u0275prov=v({token:n,factory:n.\u0275fac,providedIn:"root"})};function D(n,t){if(n&1){let e=g();r(0,"div")(1,"button",8,0),_("click",function(){let p=d(e).$implicit,E=I(2),k=l(2);return m(k.verificarRespuesta(p,E))}),o(3),i()()}if(n&2){let e=t.$implicit;a(3),u(" ",e.name," ")}}function A(n,t){if(n&1){let e=g();r(0,"button",9),_("click",function(){d(e);let p=l(2);return m(p.continuarJuego())}),o(1,"\u25B6\uFE0F Continuar"),i()}}function J(n,t){if(n&1){let e=g();r(0,"button",9),_("click",function(){d(e);let p=l(2);return m(p.reiniciarJuego())}),o(1,"\u{1F504} Reiniciar"),i()}}function V(n,t){if(n&1&&(r(0,"div",3),S(1,"img",4),r(2,"p",5),o(3,"Tiempo restante: "),r(4,"strong"),o(5),i()(),f(6,D,4,1,"div",6),r(7,"p")(8,"strong"),o(9,"Intentos restantes:"),i(),o(10),i(),f(11,A,2,0,"button",7)(12,J,2,0,"button",7),i()),n&2){let e=l();a(),c("src",e.paisSeleccionado.flag,P)("alt",e.paisSeleccionado.name),a(4),u("",e.tiempoRestante,"s"),a(),c("ngForOf",e.opciones),a(4),u(" ",e.intentosRestantes,""),a(),c("ngIf",e.respuestaSeleccionada&&e.intentosRestantes>0),a(),c("ngIf",e.intentosRestantes===0)}}function z(n,t){if(n&1&&(r(0,"div",10)(1,"h3"),o(2,"\u{1F3AF} \xA1Juego terminado!"),i(),r(3,"p")(4,"strong"),o(5,"Puntuaci\xF3n final:"),i(),o(6),i()()),n&2){let e=l();a(6),u(" ",e.puntuacion,"")}}var R=class n{constructor(t){this.paisesService=t;this.paisSeleccionado=this.elegirUnPais()}listadoPaises=[];paisSeleccionado;opciones=[];respuestaSeleccionada=!1;tiempoRestante=10;intervalo;puntuacion=0;intentosRestantes=3;ngOnInit(){this.paisesService.getPaises().subscribe(t=>{this.listadoPaises=t.map(e=>({name:e.translations?.spa?.common||e.name.common,flag:e.flags?.png||""})),this.iniciarJuego()})}elegirUnPais(){let t=Math.floor(Math.random()*this.listadoPaises.length);return this.listadoPaises[t]}iniciarJuego(){if(this.listadoPaises.length<3)return;this.paisSeleccionado=this.elegirUnPais();let t=new Set;for(t.add(this.paisSeleccionado);t.size<3;){let e=this.elegirUnPais();t.add(e)}setTimeout(()=>{document.querySelectorAll("button.opcion").forEach(e=>{e.removeAttribute("disabled"),e.classList.remove("correcto","incorrecto")})}),this.opciones=Array.from(t).sort(()=>Math.random()-.5),this.respuestaSeleccionada=!1,this.iniciarTemporizador()}iniciarTemporizador(){this.tiempoRestante=10,this.intervalo=setInterval(()=>{this.tiempoRestante>0?this.tiempoRestante--:this.seleccionarPrimeraOpcion()},1e3)}verificarRespuesta(t,e){this.respuestaSeleccionada||(this.respuestaSeleccionada=!0,clearInterval(this.intervalo),t.name===this.paisSeleccionado.name?this.puntuacion+=5:this.intentosRestantes--,e.classList.add(t.name===this.paisSeleccionado.name?"correcto":"incorrecto"),document.querySelectorAll("button.opcion").forEach(s=>s.setAttribute("disabled","true")))}seleccionarPrimeraOpcion(){clearInterval(this.intervalo);let t=this.opciones[0];this.verificarRespuesta(t,document.querySelector("button.opcion"))}reiniciarJuego(){this.puntuacion=0,this.intentosRestantes=3,this.respuestaSeleccionada=!1,clearInterval(this.intervalo),this.iniciarJuego()}continuarJuego(){this.intentosRestantes>0&&this.iniciarJuego()}static \u0275fac=function(e){return new(e||n)(b(h))};static \u0275cmp=C({type:n,selectors:[["app-preguntados"]],decls:4,vars:2,consts:[["boton",""],["class","contenedor-pregunta",4,"ngIf"],["class","resultado-final",4,"ngIf"],[1,"contenedor-pregunta"],[3,"src","alt"],[1,"timer"],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[1,"opcion",3,"click"],[3,"click"],[1,"resultado-final"]],template:function(e,s){e&1&&(r(0,"h1"),o(1,"\xBFA qu\xE9 pa\xEDs pertenece esta bandera?"),i(),f(2,V,13,7,"div",1)(3,z,7,1,"div",2)),e&2&&(a(2),c("ngIf",s.paisSeleccionado),a(),c("ngIf",s.intentosRestantes===0))},dependencies:[O,y,M],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;text-align:center;background-color:#4caf50;color:#fff}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{text-align:center}img[_ngcontent-%COMP%]{display:block;margin:0 auto;width:200px;height:auto;border-radius:10px;box-shadow:3px 3px 10px #0000004d}.contenedor-pregunta[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:15px}button[_ngcontent-%COMP%]{width:200px;padding:10px;font-size:1.2rem;border-radius:20px;cursor:pointer;border:none;transition:background-color .3s ease,transform .2s ease}button[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.correcto[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff}.incorrecto[_ngcontent-%COMP%]{background-color:#f44336!important;color:#fff}button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.timer[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#ff5722}.resultado-final[_ngcontent-%COMP%]{text-align:center;padding:20px;font-size:1.5rem}"]})};export{R as PreguntadosComponent};
