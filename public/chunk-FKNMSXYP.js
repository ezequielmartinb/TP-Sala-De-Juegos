import{a as N,b as c,c as M,d as A,e as j,g as _,i as O,j as P,k as V,l as q,m as z,n as G,o as D,q as Y}from"./chunk-EC2R4OUN.js";import{l as w,n as k}from"./chunk-3UXFVKZA.js";import{Ca as y,Ha as u,K as h,Oa as m,Qa as r,Ra as n,Sa as d,Ta as I,W as g,Wa as x,X as E,Xa as p,bb as a,db as T,sa as l,wb as F,xa as S}from"./chunk-LTGA3DLZ.js";import"./chunk-LJ5XHLMQ.js";import{h as v}from"./chunk-FK42CRUA.js";var C={production:!0,apiUrl:"https://yhxqhnpjtrpqzzmdnxfh.supabase.co",publicAnonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InloeHFobnBqdHJwcXp6bWRueGZoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDY2NTE2NDUsImV4cCI6MjA2MjIyNzY0NX0.4Wb6R7LxMzORJoyCNrWYl3PlHsZ2VsIuPGR5Gp2K7U8"};var b=class t{supabase=F(C.apiUrl,C.publicAnonKey);insertarEncuesta(o){return v(this,null,function*(){let e=localStorage.getItem("username");if(!e)return console.error("\u274C No se encontr\xF3 username en el local storage."),null;if(yield this.verificarEncuestaPorUsuario(e))return console.error("\u274C Usuario ya registrado, no se puede insertar."),null;o.username=e;let{data:s,error:f}=yield this.supabase.from("encuestas").insert([o]).select();return f?(console.error("\u274C Error en Supabase:",f.message),null):s})}verificarEncuestaPorUsuario(o){return v(this,null,function*(){let{data:e,error:i}=yield this.supabase.from("encuestas").select("username").eq("username",o);return i?(console.error("\u274C Error al consultar Supabase:",i.message),!1):e.length>0})}static \u0275fac=function(e){return new(e||t)};static \u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"})};function Z(t,o){t&1&&(r(0,"div",2),a(1,` \u2705 Gracias por completar la encuesta
`),n())}function L(t,o){t&1&&(r(0,"small"),a(1,"\u26A0 Este campo es obligatorio."),n())}function B(t,o){t&1&&(r(0,"small"),a(1,"Solo se permiten letras."),n())}function X(t,o){if(t&1&&(r(0,"div"),u(1,L,2,0,"small",10)(2,B,2,0,"small",10),n()),t&2){let e=p(2);l(),m("ngIf",e.Nombre==null||e.Nombre.errors==null?null:e.Nombre.errors.required),l(),m("ngIf",e.Nombre==null||e.Nombre.errors==null?null:e.Nombre.errors.pattern)}}function H(t,o){t&1&&(r(0,"small"),a(1,"\u26A0 Este campo es obligatorio."),n())}function K(t,o){t&1&&(r(0,"small"),a(1,"Solo se permiten letras."),n())}function W(t,o){if(t&1&&(r(0,"div"),u(1,H,2,0,"small",10)(2,K,2,0,"small",10),n()),t&2){let e=p(2);l(),m("ngIf",e.Apellido==null||e.Apellido.errors==null?null:e.Apellido.errors.required),l(),m("ngIf",e.Apellido==null||e.Apellido.errors==null?null:e.Apellido.errors.pattern)}}function $(t,o){t&1&&(r(0,"small"),a(1,"\u26A0 Este campo es obligatorio."),n())}function Q(t,o){t&1&&(r(0,"small"),a(1,"Debe ser mayor de 18 a\xF1os."),n())}function ee(t,o){t&1&&(r(0,"small"),a(1,"Debe ser menor de 99 a\xF1os."),n())}function te(t,o){if(t&1&&(r(0,"div"),u(1,$,2,0,"small",10)(2,Q,2,0,"small",10)(3,ee,2,0,"small",10),n()),t&2){let e=p(2);l(),m("ngIf",e.Edad==null||e.Edad.errors==null?null:e.Edad.errors.required),l(),m("ngIf",e.Edad==null||e.Edad.errors==null?null:e.Edad.errors.min),l(),m("ngIf",e.Edad==null||e.Edad.errors==null?null:e.Edad.errors.max)}}function ne(t,o){t&1&&(r(0,"small"),a(1,"\u26A0 Este campo es obligatorio."),n())}function re(t,o){t&1&&(r(0,"small"),a(1,"Solo se permiten n\xFAmeros."),n())}function oe(t,o){t&1&&(r(0,"small"),a(1,"M\xE1ximo 10 caracteres."),n())}function ie(t,o){t&1&&(r(0,"small"),a(1,"M\xEDnimo 10 caracteres."),n())}function ae(t,o){if(t&1&&(r(0,"div"),u(1,ne,2,0,"small",10)(2,re,2,0,"small",10)(3,oe,2,0,"small",10)(4,ie,2,0,"small",10),n()),t&2){let e=p(2);l(),m("ngIf",e.Telefono==null||e.Telefono.errors==null?null:e.Telefono.errors.required),l(),m("ngIf",e.Telefono==null||e.Telefono.errors==null?null:e.Telefono.errors.pattern),l(),m("ngIf",e.Telefono==null||e.Telefono.errors==null?null:e.Telefono.errors.maxlength),l(),m("ngIf",e.Telefono==null||e.Telefono.errors==null?null:e.Telefono.errors.minlength)}}function le(t,o){t&1&&(r(0,"div")(1,"small",39),a(2,"Debes seleccionar una opci\xF3n."),n()())}function me(t,o){t&1&&(r(0,"div")(1,"small",39),a(2,"Debes seleccionar al menos una opci\xF3n."),n()())}function se(t,o){t&1&&(r(0,"small"),a(1,"\u26A0 Este campo es obligatorio."),n())}function ce(t,o){t&1&&(r(0,"small"),a(1,"\u26A0 El comentario no puede superar los 180 caracteres."),n())}function ue(t,o){if(t&1&&(r(0,"div",39),u(1,se,2,0,"small",10)(2,ce,2,0,"small",10),n()),t&2){let e=p(2);l(),m("ngIf",e.Comentario==null||e.Comentario.errors==null?null:e.Comentario.errors.required),l(),m("ngIf",e.Comentario==null||e.Comentario.errors==null?null:e.Comentario.errors.maxlength)}}function de(t,o){t&1&&(r(0,"div",40),a(1," \u26A0\uFE0F Ya has enviado una encuesta anteriormente. "),n())}function pe(t,o){if(t&1){let e=I();r(0,"form",3),x("ngSubmit",function(){g(e);let s=p();return E(s.enviarFormulario())}),r(1,"form",4),x("ngSubmit",function(){g(e);let s=p();return E(s.enviarFormulario())}),r(2,"fieldset",5)(3,"legend"),a(4,"Datos personales"),n(),r(5,"div",6)(6,"div",7)(7,"label",8),a(8,"Nombre:"),n(),d(9,"input",9),u(10,X,3,2,"div",10),n(),r(11,"div",7)(12,"label",11),a(13,"Apellido:"),n(),d(14,"input",12),u(15,W,3,2,"div",10),n(),r(16,"div",7)(17,"label",13),a(18,"Edad:"),n(),d(19,"input",14),u(20,te,4,3,"div",10),n(),r(21,"div",7)(22,"label",15),a(23,"Tel\xE9fono:"),n(),d(24,"input",16),u(25,ae,5,4,"div",10),n()()(),d(26,"br"),r(27,"fieldset",5)(28,"legend"),a(29,"1 - \xBFCu\xE1l juego te ha divertido m\xE1s?"),n(),r(30,"div",6)(31,"div",7)(32,"div",17),d(33,"input",18),r(34,"label",19),a(35,"Ahorcado"),n()()(),r(36,"div",7)(37,"div",17),d(38,"input",20),r(39,"label",21),a(40,"Mayor-menor"),n()()(),r(41,"div",7)(42,"div",17),d(43,"input",22),r(44,"label",23),a(45,"Preguntados"),n()()(),r(46,"div",7)(47,"div",17),d(48,"input",24),r(49,"label",25),a(50,"Blackjack"),n()()()(),u(51,le,3,0,"div",10),n(),d(52,"br"),r(53,"fieldset",5)(54,"legend"),a(55,"2 - \xBFQu\xE9 caracter\xEDsticas agregar\xEDas para hacer los juegos m\xE1s entretenidos o desafiantes?"),n(),r(56,"div",6)(57,"div",7)(58,"input",26),x("change",function(s){g(e);let f=p();return E(f.agregarOEliminarCaracteristica("M\xE1s niveles de dificultad",s))}),n(),r(59,"label",27),a(60,"M\xE1s niveles de dificultad"),n()(),r(61,"div",7)(62,"input",28),x("change",function(s){g(e);let f=p();return E(f.agregarOEliminarCaracteristica("Nuevos modos de juego",s))}),n(),r(63,"label",29),a(64,"Nuevos modos de juego"),n()(),r(65,"div",7)(66,"input",30),x("change",function(s){g(e);let f=p();return E(f.agregarOEliminarCaracteristica("Integraci\xF3n con amigos",s))}),n(),r(67,"label",31),a(68,"Integraci\xF3n online con amigos"),n()()(),u(69,me,3,0,"div",10),n(),d(70,"br"),r(71,"fieldset",5)(72,"legend"),a(73,"3 - Comparte tu experiencia con la aplicaci\xF3n"),n(),r(74,"div",6)(75,"div",32)(76,"label",33),a(77,"Tu comentario:"),n(),r(78,"textarea",34),x("input",function(){g(e);let s=p();return E(s.actualizarContador())}),n(),r(79,"div",35),a(80),n(),u(81,ue,3,2,"div",36),n()(),u(82,de,2,0,"div",37),n(),d(83,"br"),r(84,"button",38),a(85,"Enviar"),n()()()}if(t&2){let e,i=p();m("formGroup",i.formularioEncuesta),l(),m("formGroup",i.formularioEncuesta),l(9),m("ngIf",i.Nombre==null?null:i.Nombre.invalid),l(5),m("ngIf",i.Apellido==null?null:i.Apellido.invalid),l(5),m("ngIf",i.Edad==null?null:i.Edad.invalid),l(5),m("ngIf",i.Telefono==null?null:i.Telefono.invalid),l(26),m("ngIf",(e=i.formularioEncuesta.get("juegoFavorito"))==null?null:e.invalid),l(18),m("ngIf",i.Caracteristicas==null?null:i.Caracteristicas.invalid),l(11),T(" Caracteres ingresados: ",i.contadorCaracteres,"/180 "),l(),m("ngIf",(i.Comentario==null?null:i.Comentario.invalid)&&(i.Comentario==null?null:i.Comentario.touched)),l(),m("ngIf",i.mostrarError),l(2),m("disabled",i.formularioEncuesta.invalid)}}var J=class t{constructor(o){this.encuestaService=o}formularioEncuesta;mensajeGracias=!1;mostrarFormulario=!0;contadorCaracteres=0;mostrarError=!1;ngOnInit(){this.formularioEncuesta=new j({nombre:new _("",[c.required,c.pattern("^[a-zA-Z\xF1\xD1\xE1\xE9\xED\xF3\xFA\xC1\xC9\xCD\xD3\xDA ]+$"),c.required]),apellido:new _("",[c.required,c.pattern("^[a-zA-Z\xF1\xD1\xE1\xE9\xED\xF3\xFA\xC1\xC9\xCD\xD3\xDA ]+$"),c.required]),edad:new _("",[c.required,c.min(18),c.max(99)]),telefono:new _("",[c.required,c.pattern(/^\d+$/),c.maxLength(10),c.minLength(10)]),juegoFavorito:new _("",[c.required]),caracteristicas:new D([],[c.required]),comentario:new _("",[c.required,c.maxLength(180)])})}agregarOEliminarCaracteristica(o,e){if(e.target.checked)this.Caracteristicas.push(new _(o));else{let i=this.Caracteristicas.controls.findIndex(s=>s.value===o);this.Caracteristicas.removeAt(i)}}actualizarContador(){this.contadorCaracteres=this.formularioEncuesta.get("comentario")?.value?.length||0}get Nombre(){return this.formularioEncuesta.get("nombre")}get Apellido(){return this.formularioEncuesta.get("apellido")}get Edad(){return this.formularioEncuesta.get("edad")}get Telefono(){return this.formularioEncuesta.get("telefono")}get JuegoFavorito(){return this.formularioEncuesta.get("juegoFavorito")}get Caracteristicas(){return this.formularioEncuesta.get("caracteristicas")}get Comentario(){return this.formularioEncuesta.get("comentario")}enviarFormulario(){return v(this,null,function*(){let o=localStorage.getItem("username");if(!o){console.error("\u274C No se encontr\xF3 username en el local storage.");return}if(this.formularioEncuesta.invalid){this.formularioEncuesta.markAllAsTouched();return}try{if(yield this.encuestaService.verificarEncuestaPorUsuario(o)){console.error("\u26A0\uFE0F Ya has enviado una encuesta anteriormente."),this.mostrarError=!0;return}let i={nombre:this.formularioEncuesta.value.nombre,apellido:this.formularioEncuesta.value.apellido,edad:this.formularioEncuesta.value.edad,telefono:this.formularioEncuesta.value.telefono,juego_favorito:this.formularioEncuesta.value.juegoFavorito,caracteristicas:this.formularioEncuesta.value.caracteristicas,comentario:this.formularioEncuesta.value.comentario,username:o},s=yield this.encuestaService.insertarEncuesta(i);console.log(s),s?(this.mostrarFormulario=!1,this.mensajeGracias=!0):console.error("\u274C Hubo un problema al enviar la encuesta.")}catch(e){console.error("Error al enviar la encuesta:",e instanceof Error?e.message:e)}})}static \u0275fac=function(e){return new(e||t)(S(b))};static \u0275cmp=y({type:t,selectors:[["app-encuesta"]],decls:4,vars:2,consts:[["class","alert alert-success text-center mt-3",4,"ngIf"],["class","container p-4 shadow-lg rounded bg-light",3,"formGroup","ngSubmit",4,"ngIf"],[1,"alert","alert-success","text-center","mt-3"],[1,"container","p-4","shadow-lg","rounded","bg-light",3,"ngSubmit","formGroup"],[3,"ngSubmit","formGroup"],[1,"border","p-3"],[1,"row","g-3"],[1,"col-md-6"],["for","nombre"],["id","nombre","type","text","formControlName","nombre",1,"form-control"],[4,"ngIf"],["for","apellido"],["id","apellido","type","text","formControlName","apellido",1,"form-control"],["for","edad"],["id","edad","type","number","formControlName","edad",1,"form-control"],["for","telefono"],["id","telefono","type","text","formControlName","telefono","maxlength","10",1,"form-control"],[1,"form-check"],["type","radio","id","ahorcado","name","juego","value","ahorcado","formControlName","juegoFavorito",1,"form-check-input"],["for","ahorcado",1,"form-check-label"],["type","radio","id","mayor-menor","name","juego","value","mayor-menor","formControlName","juegoFavorito",1,"form-check-input"],["for","mayor-menor",1,"form-check-label"],["type","radio","id","preguntados","name","juego","value","preguntados","formControlName","juegoFavorito",1,"form-check-input"],["for","preguntados",1,"form-check-label"],["type","radio","id","blackjack","name","juego","value","blackjack","formControlName","juegoFavorito",1,"form-check-input"],["for","blackjack",1,"form-check-label"],["type","checkbox","id","niveles",1,"form-check-input",3,"change"],["for","niveles",1,"form-check-label"],["type","checkbox","id","modos",1,"form-check-input",3,"change"],["for","modos",1,"form-check-label"],["type","checkbox","id","integracion",1,"form-check-input",3,"change"],["for","integracion",1,"form-check-label"],[1,"col-md-12"],["for","comentario",1,"form-label"],["id","comentario","formControlName","comentario","rows","3",1,"form-control",3,"input"],[1,"text-muted"],["class","text-danger",4,"ngIf"],["class","alert alert-danger text-center",4,"ngIf"],["type","submit",3,"disabled"],[1,"text-danger"],[1,"alert","alert-danger","text-center"]],template:function(e,i){e&1&&(r(0,"h1"),a(1,"Encuesta"),n(),u(2,Z,2,0,"div",0)(3,pe,86,12,"form",1)),e&2&&(l(2),m("ngIf",i.mensajeGracias),l(),m("ngIf",i.mostrarFormulario))},dependencies:[k,w,Y,O,N,P,V,M,A,G,q,z],styles:["body[_ngcontent-%COMP%], label[_ngcontent-%COMP%], input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], legend[_ngcontent-%COMP%]{color:#000!important}.encuesta-container[_ngcontent-%COMP%]{max-width:700px;margin:auto;padding:25px;background-color:#f1f1f1;border-radius:12px;box-shadow:0 4px 15px #00000026}h1[_ngcontent-%COMP%]{text-align:center;font-size:26px;font-weight:700}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:12px;margin-top:8px;border:2px solid #ccc;border-radius:8px;font-size:16px;transition:border-color .3s,background-color .3s}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{border-color:#007bff;background-color:#f9f9f9}.checkbox-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:12px}button[_ngcontent-%COMP%]{background:linear-gradient(90deg,#007bff,#004494);color:#fff;padding:12px 18px;font-size:18px;font-weight:700;border:none;border-radius:8px;cursor:pointer;width:100%;transition:background .3s ease-in-out,transform .2s}button[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#0056b3,#037);transform:scale(1.02)}.alert-success[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#fff;background:#28a745;padding:12px;border-radius:8px;text-align:center;box-shadow:0 4px 10px #ee030333}.small-error[_ngcontent-%COMP%]{color:red;font-size:.85rem}.small-info[_ngcontent-%COMP%]{color:gray;font-size:.85rem}small[_ngcontent-%COMP%]{color:red;font-size:.85rem}.form-check-input[_ngcontent-%COMP%]:checked{background-color:#007bff;border-color:#007bff}.form-check-input[_ngcontent-%COMP%]{margin-right:8px}"]})};export{J as EncuestaComponent};
