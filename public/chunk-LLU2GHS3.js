import{j as y,l as w,r as E}from"./chunk-RC5RGOYE.js";import{$a as O,Ca as j,Ga as h,K as x,Na as c,P as _,Pa as r,Qa as s,Ra as S,Sa as m,Ta as b,Ua as f,W as u,Wa as F,X as p,Xa as I,Ya as A,Za as l,_a as g,eb as P,sa as o,xa as C}from"./chunk-NBVEKDWB.js";var d=class i{constructor(t){this.http=t}getPalabrasSecretas(){return this.http.get("https://random-word-api.herokuapp.com/all?lang=es")}static \u0275fac=function(e){return new(e||i)(_(E))};static \u0275prov=x({token:i,factory:i.\u0275fac,providedIn:"root"})};var R=["hangmanCanvas"],T=(i,t,e)=>[i,t,e];function V(i,t){if(i&1){let e=m();r(0,"button",9),b("click",function(){let n=u(e).$implicit,v=f(2);return p(v.mostrarLetraElegida(n))}),l(1),s()}if(i&2){let e=t.$implicit,a=f(2);c("disabled",a.letras.includes(e)),o(),O("",e," ")}}function D(i,t){if(i&1&&(r(0,"div",7),h(1,V,2,2,"button",8),s()),i&2){let e=t.$implicit;o(),c("ngForOf",e)}}var L=class i{constructor(t){this.palabrasService=t}canvasRef;ctx;fila1=["Q","W","E","R","T","Y","U","I","O","P"];fila2=["A","S","D","F","G","H","J","K","L"];fila3=["Z","X","C","V","B","N","M"];palabrasSecretas=[];palabraIngresada="";palabraOculta="";letras=[];errores=0;erroresMaximos=11;juegoActivo=!0;ngOnInit(){this.palabrasService.getPalabrasSecretas().subscribe({next:t=>{console.log(t),this.palabrasSecretas=t.filter(e=>!e.includes(" ")&&!e.includes("-")&&!e.includes(".")&&!e.includes("!")).map(e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toUpperCase()),this.palabrasSecretas.length>0?this.iniciarJuego():console.error("Error: No se recibieron palabras de la API.")},error:t=>console.error("Error al obtener palabras:",t)})}ngAfterViewInit(){this.ctx=this.canvasRef.nativeElement.getContext("2d")}iniciarJuego(){if(this.palabrasSecretas.length===0){console.error("No hay palabras disponibles para jugar.");return}let t=this.palabrasSecretas.filter(e=>!e.includes(" ")&&!e.includes("-")&&!e.includes(".")&&!e.includes("!")).map(e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,""));if(t.length===0){console.error("No quedan palabras v\xE1lidas despu\xE9s del filtrado.");return}this.palabraIngresada=t[Math.trunc(Math.random()*t.length)],this.palabraOculta="_ ".repeat(this.palabraIngresada.length).trim(),this.letras=[],this.errores=0,this.juegoActivo=!0,console.log("Palabra seleccionada sin acentos y sin espacios:",this.palabraIngresada),this.limpiarAhorcado()}mostrarLetraElegida(t){this.juegoActivo&&(this.letras.includes(t)||this.letras.push(t),this.palabraIngresada.includes(t)?this.actualizarPalabraOculta(t):this.mostrarError(),this.informarResultadoDelJuego())}actualizarPalabraOculta(t){let e="";for(let a=0;a<this.palabraIngresada.length;a++)e+=this.palabraIngresada[a]===t?t:this.palabraOculta[a*2],e+=" ";this.palabraOculta=e.trim()}mostrarError(){this.errores<this.erroresMaximos&&(this.errores++,this.dibujarAhorcado())}informarResultadoDelJuego(){this.palabraOculta.includes("_")?this.errores>=this.erroresMaximos&&(this.juegoActivo=!1,setTimeout(()=>alert(`Perdiste! La palabra era: ${this.palabraIngresada}`),300)):(this.juegoActivo=!1,setTimeout(()=>alert(`Ganaste! La palabra es: ${this.palabraIngresada}`),300))}limpiarAhorcado(){this.ctx.clearRect(0,0,200,250)}dibujarAhorcado(){let t=[()=>this.dibujarLineas(70,220,130,220),()=>this.dibujarLineas(100,50,100,220),()=>this.dibujarLineas(100,50,150,50),()=>this.dibujarLineas(150,50,150,60),()=>this.dibujarCabeza(150,80,20),()=>this.dibujarLineas(150,100,150,160),()=>this.dibujarLineas(150,110,130,140),()=>this.dibujarLineas(150,110,170,140),()=>this.dibujarLineas(150,160,130,190),()=>this.dibujarLineas(150,160,170,190),()=>this.dibujarLineas(120,100,180,100)];this.errores<=t.length&&t[this.errores-1]()}dibujarCabeza(t,e,a){this.ctx.beginPath(),this.ctx.arc(t,e,a,0,Math.PI*2),this.ctx.strokeStyle="#FFFFFF",this.ctx.lineWidth=3,this.ctx.stroke()}dibujarLineas(t,e,a,n){this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.lineTo(a,n),this.ctx.strokeStyle="#FFFFFF",this.ctx.lineWidth=3,this.ctx.stroke()}static \u0275fac=function(e){return new(e||i)(C(d))};static \u0275cmp=j({type:i,selectors:[["app-ahorcado"]],viewQuery:function(e,a){if(e&1&&F(R,5),e&2){let n;I(n=A())&&(a.canvasRef=n.first)}},decls:14,vars:7,consts:[["hangmanCanvas",""],[1,"contenedor-ahorcado"],["width","200","height","250"],[1,"teclado"],["class","fila",4,"ngFor","ngForOf"],[1,"letras-usadas"],[1,"reset-btn",3,"click"],[1,"fila"],["class","teclas",3,"disabled","click",4,"ngFor","ngForOf"],[1,"teclas",3,"click","disabled"]],template:function(e,a){if(e&1){let n=m();r(0,"div",1),S(1,"canvas",2,0),r(3,"h2"),l(4),s(),r(5,"div",3),h(6,D,2,1,"div",4),s(),r(7,"div",5)(8,"h3"),l(9,"Letras usadas:"),s(),r(10,"p"),l(11),s()(),r(12,"button",6),b("click",function(){return u(n),p(a.iniciarJuego())}),l(13,"Reiniciar Juego"),s()()}e&2&&(o(4),g(a.palabraOculta),o(2),c("ngForOf",P(3,T,a.fila1,a.fila2,a.fila3)),o(5),g(a.letras.join(", ")))},dependencies:[w,y],styles:[".teclado[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.fila[_ngcontent-%COMP%]{display:flex;gap:5px}.teclas[_ngcontent-%COMP%]{width:40px;height:40px;font-size:18px;text-align:center;cursor:pointer;border-radius:5px;background-color:#007bff;color:#fff;border:none}.teclas[_ngcontent-%COMP%]:active{background-color:#004085;transform:scale(.95)}.teclas[_ngcontent-%COMP%]:disabled{background-color:#6c757d;cursor:not-allowed}.teclas[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})};export{L as a};
