import{d as _}from"./chunk-T2ANPPQO.js";import{a as S,b as h}from"./chunk-H25SF227.js";import"./chunk-LJ5XHLMQ.js";import{a as y,b as E,c as I,d as L}from"./chunk-ILSLAPDQ.js";import{a as b}from"./chunk-VQ3PVDQZ.js";import"./chunk-EDEC42IT.js";import"./chunk-7LMTQFKZ.js";import{$a as M,Ca as C,Pa as i,Qa as n,Ra as c,Ta as d,_a as s,cb as g,db as p,eb as u,kb as w,sa as a,xa as l}from"./chunk-3UVLN3EJ.js";import{h as v}from"./chunk-FK42CRUA.js";var A=S(h.apiUrl,h.publicAnonKey),k=class f{constructor(r,t,e){this.router=r;this.cd=t;this.authService=e}username="";password="";errorMessage="";login(){return v(this,null,function*(){if(!this.authService.isValidEmail(this.username)){this.errorMessage="Ingrese un correo electr\xF3nico v\xE1lido";return}try{let{data:r,error:t}=yield A.auth.signInWithPassword({email:this.username,password:this.password});if(t){this.errorMessage=this.getErrorMessage(t.message);return}this.cd.detectChanges(),this.authService.setUsuario(this.username),this.router.navigate(["/home"])}catch{this.errorMessage="Error inesperado al iniciar sesi\xF3n"}})}getErrorMessage(r){return{"Invalid login credentials":"Credenciales inv\xE1lidas","missing email or phone":"Ingrese username"}[r]||`Error inesperado: ${r}`}quickAcess(){this.username="ezequielmartinb10@gmail.com",this.password="123456",this.cd.detectChanges()}static \u0275fac=function(t){return new(t||f)(l(_),l(w),l(b))};static \u0275cmp=C({type:f,selectors:[["app-login"]],decls:19,vars:3,consts:[["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"contenedor-login"],[1,"formulario-login"],["type","text","placeholder","Username",3,"ngModelChange","ngModel"],["type","password","placeholder","Password",3,"ngModelChange","ngModel"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-link",3,"click"],[1,"error-msg"]],template:function(t,e){t&1&&(i(0,"head"),c(1,"meta",0)(2,"meta",1),i(3,"title"),s(4,"Login"),n()(),i(5,"h1"),s(6,"Inicia sesi\xF3n"),n(),i(7,"div",2)(8,"div",3)(9,"input",4),u("ngModelChange",function(o){return p(e.username,o)||(e.username=o),o}),n(),c(10,"br"),i(11,"input",5),u("ngModelChange",function(o){return p(e.password,o)||(e.password=o),o}),n(),c(12,"br"),i(13,"button",6),d("click",function(){return e.login()}),s(14,"Iniciar sesi\xF3n"),n(),i(15,"button",7),d("click",function(){return e.quickAcess()}),s(16,"Acceso r\xE1pido"),n()()(),i(17,"div",8),s(18),n()),t&2&&(a(9),g("ngModel",e.username),a(2),g("ngModel",e.password),a(7),M(e.errorMessage))},dependencies:[L,y,E,I],encapsulation:2})};export{k as LoginComponent};
