import{a as k}from"./chunk-4JRDNEFN.js";import{j as E,k as w,l as M,m as L}from"./chunk-VJLT3EIH.js";import{$a as x,Ca as F,Ga as d,K as _,Na as l,P as C,Pa as r,Qa as s,Ra as P,Sa as g,Ta as b,Ua as p,W as u,Wa as I,X as m,Xa as S,Ya as y,Za as c,_a as f,fb as A,gb as O,sa as n,xa as j}from"./chunk-XNZRBX6S.js";var h=class i{constructor(a){this.http=a}getPalabrasSecretas(){return this.http.get("https://random-word-api.herokuapp.com/all?lang=es")}static \u0275fac=function(e){return new(e||i)(C(k))};static \u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})};var z=["hangmanCanvas"],D=(i,a,e)=>[i,a,e],N=(i,a)=>({"mensaje-ganador":i,"mensaje-perdedor":a});function H(i,a){i&1&&(r(0,"p",9),c(1,"\u231B Eligiendo palabra..."),s())}function J(i,a){if(i&1&&(r(0,"p",10),c(1),s()),i&2){let e=p();l("ngClass",A(2,N,e.mensajeFinal.includes("Ganaste"),e.mensajeFinal.includes("Perdiste"))),n(),x(" ",e.mensajeFinal,"")}}function Q(i,a){if(i&1){let e=g();r(0,"button",13),b("click",function(){let o=u(e).$implicit,v=p(2);return m(v.mostrarLetraElegida(o))}),c(1),s()}if(i&2){let e=a.$implicit,t=p(2);l("disabled",t.cargandoPalabra||t.letras.includes(e)),n(),x(" ",e," ")}}function $(i,a){if(i&1&&(r(0,"div",11),d(1,Q,2,2,"button",12),s()),i&2){let e=a.$implicit;n(),l("ngForOf",e)}}var R=class i{constructor(a){this.palabrasService=a}canvasRef;ctx;fila1=["Q","W","E","R","T","Y","U","I","O","P"];fila2=["A","S","D","F","G","H","J","K","L"];fila3=["Z","X","C","V","B","N","M"];palabrasSecretas=[];palabraIngresada="";palabraOculta="";letras=[];errores=0;erroresMaximos=7;juegoActivo=!0;cargandoPalabra=!0;mensajeFinal="";ngOnInit(){this.cargandoPalabra=!0,this.palabrasService.getPalabrasSecretas().subscribe({next:a=>{this.palabrasSecretas=a.filter(e=>!e.includes(" ")&&!e.includes("-")&&!e.includes(".")&&!e.includes("!")).map(e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toUpperCase()),this.palabrasSecretas.length>0?this.iniciarJuego():console.error("Error: No se recibieron palabras v\xE1lidas."),this.cargandoPalabra=!1},error:a=>{console.error("Error al obtener palabras:",a),this.cargandoPalabra=!1}})}ngAfterViewInit(){this.ctx=this.canvasRef.nativeElement.getContext("2d")}iniciarJuego(){if(this.palabrasSecretas.length===0){console.error("No hay palabras disponibles para jugar.");return}this.palabraIngresada=this.palabrasSecretas[Math.trunc(Math.random()*this.palabrasSecretas.length)],this.palabraOculta="_ ".repeat(this.palabraIngresada.length).trim(),this.letras=[],this.errores=0,this.juegoActivo=!0,console.log("Palabra seleccionada:",this.palabraIngresada),this.mensajeFinal="",this.limpiarAhorcado()}mostrarLetraElegida(a){this.juegoActivo&&(this.letras.includes(a)||this.letras.push(a),this.palabraIngresada.includes(a)?this.actualizarPalabraOculta(a):this.mostrarError(),this.informarResultadoDelJuego())}actualizarPalabraOculta(a){let e="";for(let t=0;t<this.palabraIngresada.length;t++)e+=this.palabraIngresada[t]===a?a:this.palabraOculta[t*2],e+=" ";this.palabraOculta=e.trim()}mostrarError(){this.errores<this.erroresMaximos&&(this.dibujarHorca(),this.errores++,this.dibujarAhorcado())}informarResultadoDelJuego(){this.palabraOculta.includes("_")?this.errores>=this.erroresMaximos&&(this.juegoActivo=!1,this.mensajeFinal=`Perdiste! La palabra era: ${this.palabraIngresada}`):(this.juegoActivo=!1,this.mensajeFinal=`Ganaste! La palabra es: ${this.palabraIngresada}`)}limpiarAhorcado(){this.ctx.clearRect(0,0,200,250)}dibujarAhorcado(){let a=[()=>this.dibujarCabeza(150,80,20),()=>this.dibujarLineas(150,100,150,160),()=>this.dibujarLineas(150,110,130,140),()=>this.dibujarLineas(150,110,170,140),()=>this.dibujarLineas(150,160,130,190),()=>this.dibujarLineas(150,160,170,190),()=>this.dibujarLineas(120,100,180,100)];this.errores<=a.length&&a[this.errores-1]()}dibujarHorca(){let a=[()=>this.dibujarLineas(70,220,130,220),()=>this.dibujarLineas(100,50,100,220),()=>this.dibujarLineas(100,50,150,50),()=>this.dibujarLineas(150,50,150,60),()=>this.dibujarCabeza(150,80,20)];for(let e in a)a[e]()}dibujarCabeza(a,e,t){this.ctx.beginPath(),this.ctx.arc(a,e,t,0,Math.PI*2),this.ctx.strokeStyle="#FFFFFF",this.ctx.lineWidth=3,this.ctx.stroke()}dibujarLineas(a,e,t,o){this.ctx.beginPath(),this.ctx.moveTo(a,e),this.ctx.lineTo(t,o),this.ctx.strokeStyle="#FFFFFF",this.ctx.lineWidth=3,this.ctx.stroke()}static \u0275fac=function(e){return new(e||i)(j(h))};static \u0275cmp=F({type:i,selectors:[["app-ahorcado"]],viewQuery:function(e,t){if(e&1&&I(z,5),e&2){let o;S(o=y())&&(t.canvasRef=o.first)}},decls:16,vars:10,consts:[["hangmanCanvas",""],[1,"contenedor-ahorcado"],["width","200","height","250"],["class","contenedor-cargar-palabra",4,"ngIf"],["class","parrafo-resultados",3,"ngClass",4,"ngIf"],[1,"teclado"],["class","fila",4,"ngFor","ngForOf"],[1,"letras-usadas"],[1,"reset-btn",3,"click","disabled"],[1,"contenedor-cargar-palabra"],[1,"parrafo-resultados",3,"ngClass"],[1,"fila"],["class","teclas",3,"disabled","click",4,"ngFor","ngForOf"],[1,"teclas",3,"click","disabled"]],template:function(e,t){if(e&1){let o=g();r(0,"div",1),P(1,"canvas",2,0),r(3,"h2"),c(4),s(),d(5,H,2,0,"p",3)(6,J,2,5,"p",4),r(7,"div",5),d(8,$,2,1,"div",6),s(),r(9,"div",7)(10,"h3"),c(11,"Letras usadas:"),s(),r(12,"p"),c(13),s()(),r(14,"button",8),b("click",function(){return u(o),m(t.iniciarJuego())}),c(15,"Reiniciar Juego"),s()()}e&2&&(n(4),f(t.palabraOculta),n(),l("ngIf",t.cargandoPalabra),n(),l("ngIf",t.mensajeFinal),n(2),l("ngForOf",O(6,D,t.fila1,t.fila2,t.fila3)),n(5),f(t.letras.join(", ")),n(),l("disabled",t.cargandoPalabra))},dependencies:[L,E,w,M],styles:[".teclado[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.fila[_ngcontent-%COMP%]{display:flex;gap:5px}.teclas[_ngcontent-%COMP%]{width:40px;height:40px;font-size:18px;text-align:center;cursor:pointer;border-radius:5px;background-color:#007bff;color:#fff;border:none}.teclas[_ngcontent-%COMP%]:active{background-color:#004085;transform:scale(.95)}.teclas[_ngcontent-%COMP%]:disabled{background-color:#6c757d;cursor:not-allowed}.teclas[_ngcontent-%COMP%]:hover{background-color:#0056b3}.contenedor-cargar-palabra[_ngcontent-%COMP%]{text-align:center;display:flex;justify-content:center;align-items:center;height:100%}.mensaje-ganador[_ngcontent-%COMP%]{color:green;font-size:24px;font-weight:700;text-align:center}.mensaje-perdedor[_ngcontent-%COMP%]{color:red;font-size:24px;font-weight:700;text-align:center}"]})};export{R as a};
