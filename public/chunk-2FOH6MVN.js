import{d as M}from"./chunk-ORLHOC26.js";import"./chunk-WI56FDBC.js";import{a as L}from"./chunk-UDGL2PKL.js";import{a as S,c as y,h as E,p as k}from"./chunk-EC2R4OUN.js";import"./chunk-3UXFVKZA.js";import{a as h}from"./chunk-RYNEBBE2.js";import{Ca as v,Qa as t,Ra as n,Sa as m,Wa as u,bb as s,cb as _,eb as d,fb as p,gb as g,pb as w,sa as l,wb as b,xa as c}from"./chunk-LTGA3DLZ.js";import"./chunk-LJ5XHLMQ.js";import{h as C}from"./chunk-FK42CRUA.js";var I=b(h.apiUrl,h.publicAnonKey),A=class f{constructor(r,i,e){this.router=r;this.cd=i;this.authService=e}username="";password="";errorMessage="";login(){return C(this,null,function*(){if(!this.authService.isValidEmail(this.username)){this.errorMessage="Ingrese un correo electr\xF3nico v\xE1lido";return}try{let{data:r,error:i}=yield I.auth.signInWithPassword({email:this.username,password:this.password});if(i){this.errorMessage=this.getErrorMessage(i.message);return}this.cd.detectChanges(),this.authService.setUsuario(this.username),this.router.navigate(["/home"])}catch{this.errorMessage="Error inesperado al iniciar sesi\xF3n"}})}getErrorMessage(r){return{"Invalid login credentials":"Credenciales inv\xE1lidas","missing email or phone":"Ingrese username"}[r]||`Error inesperado: ${r}`}quickAcess(){this.username="ezequielmartinb10@gmail.com",this.password="123456",this.cd.detectChanges()}quickAcess2(){this.username="ezequiel@gmail.com",this.password="123456",this.cd.detectChanges()}static \u0275fac=function(i){return new(i||f)(c(M),c(w),c(L))};static \u0275cmp=v({type:f,selectors:[["app-login"]],decls:21,vars:3,consts:[["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"contenedor-login"],[1,"formulario-login"],["type","text","placeholder","Username",3,"ngModelChange","ngModel"],["type","password","placeholder","Password",3,"ngModelChange","ngModel"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-link",3,"click"],[1,"error-msg"]],template:function(i,e){i&1&&(t(0,"head"),m(1,"meta",0)(2,"meta",1),t(3,"title"),s(4,"Login"),n()(),t(5,"h1"),s(6,"Inicia sesi\xF3n"),n(),t(7,"div",2)(8,"div",3)(9,"input",4),g("ngModelChange",function(o){return p(e.username,o)||(e.username=o),o}),n(),m(10,"br"),t(11,"input",5),g("ngModelChange",function(o){return p(e.password,o)||(e.password=o),o}),n(),m(12,"br"),t(13,"button",6),u("click",function(){return e.login()}),s(14,"Iniciar sesi\xF3n"),n(),t(15,"button",7),u("click",function(){return e.quickAcess()}),s(16,"Acceso r\xE1pido usuario 1"),n(),t(17,"button",7),u("click",function(){return e.quickAcess2()}),s(18,"Acceso r\xE1pido usuario 2"),n()()(),t(19,"div",8),s(20),n()),i&2&&(l(9),d("ngModel",e.username),l(2),d("ngModel",e.password),l(9),_(e.errorMessage))},dependencies:[k,S,y,E],encapsulation:2})};export{A as LoginComponent};
