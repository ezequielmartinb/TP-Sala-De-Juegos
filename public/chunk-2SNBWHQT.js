import{d as M}from"./chunk-UDEZESVP.js";import{a as C,b as d}from"./chunk-H25SF227.js";import"./chunk-LJ5XHLMQ.js";import{a as _,b,c as R,d as E}from"./chunk-IJJ7C6Q5.js";import{a as S}from"./chunk-BZLA3WPT.js";import"./chunk-4JRDNEFN.js";import"./chunk-VJLT3EIH.js";import{Ca as v,Pa as i,Qa as o,Ra as a,Ta as w,Za as g,_a as y,bb as u,cb as p,db as c,sa as n,xa as l}from"./chunk-XNZRBX6S.js";import{h as m}from"./chunk-FK42CRUA.js";var U=C(d.apiUrl,d.publicAnonKey),T=class h{constructor(e,t){this.router=e;this.authService=t;this.username="",this.password="",this.message="",this.messageType="",this.errorMessage=""}username;password;message;messageType;errorMessage;register(){return m(this,null,function*(){if(!this.authService.isValidEmail(this.username)){this.errorMessage="Ingrese un correo electr\xF3nico v\xE1lido";return}try{let{error:e}=yield U.auth.signUp({email:this.username,password:this.password});if(e){this.errorMessage=this.getErrorMessage(e.message);return}this.saveUserData(this.username,this.password)}catch{this.errorMessage="Error inesperado al registrar usuario"}})}getErrorMessage(e){return{"Password should be at least 6 characters.":"La contrase\xF1a debe tener al menos 6 caracteres","Signup requires a valid password":"Ingrese una contrase\xF1a v\xE1lida","Anonymous sign-ins are disabled":"Ingrese un usuario y contrase\xF1a v\xE1lidos","User already registered":"El usuario que quiere registrar ya existe"}[e]||`Error inesperado: ${e}`}saveUserData(e,t){return m(this,null,function*(){let{error:r}=yield U.from("usuarios").insert([{username:e,password:t}]);r?(this.message="Hubo un error al registrar el usuario",this.messageType="error",console.error(r.message)):(this.message="Usuario registrado correctamente",this.authService.setUsuario(e),this.messageType="success",this.router.navigate(["/home"]))})}static \u0275fac=function(t){return new(t||h)(l(M),l(S))};static \u0275cmp=v({type:h,selectors:[["app-registro"]],decls:15,vars:3,consts:[["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"contenedor-login"],[1,"formulario-login"],["type","text","placeholder","Username",1,"register-input",3,"ngModelChange","ngModel"],["type","password","placeholder","Password",1,"register-input",3,"ngModelChange","ngModel"],[1,"btn","btn-success",3,"click"],[1,"error-msg"]],template:function(t,r){t&1&&(i(0,"head"),a(1,"meta",0)(2,"meta",1),i(3,"title"),g(4,"Registro"),o()(),i(5,"div",2)(6,"div",3)(7,"input",4),c("ngModelChange",function(s){return p(r.username,s)||(r.username=s),s}),o(),a(8,"br"),i(9,"input",5),c("ngModelChange",function(s){return p(r.password,s)||(r.password=s),s}),o(),a(10,"br"),i(11,"button",6),w("click",function(){return r.register()}),g(12,"Registro"),o()()(),i(13,"div",7),g(14),o()),t&2&&(n(7),u("ngModel",r.username),n(2),u("ngModel",r.password),n(5),y(r.errorMessage))},dependencies:[E,_,b,R],encapsulation:2})};export{T as RegistroComponent};
