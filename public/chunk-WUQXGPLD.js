import{a as L}from"./chunk-WI56FDBC.js";import{a as D}from"./chunk-23ELWQX3.js";import{j as O,k as w,l as M,n as k}from"./chunk-3UXFVKZA.js";import{$a as A,Ca as I,Ha as d,K as C,Oa as l,P as j,Qa as r,Ra as s,Sa as S,Ta as g,W as h,Wa as b,X as m,Xa as u,Za as F,_a as P,bb as o,cb as v,db as p,ib as E,jb as y,sa as n,xa as _}from"./chunk-LTGA3DLZ.js";var f=class i{constructor(t){this.http=t}getPalabrasSecretas(){return this.http.get("https://random-word-api.herokuapp.com/all?lang=es")}static \u0275fac=function(e){return new(e||i)(j(L))};static \u0275prov=C({token:i,factory:i.\u0275fac,providedIn:"root"})};var z=["hangmanCanvas"],J=(i,t)=>({"mensaje-ganador":i,"mensaje-perdedor":t}),N=(i,t,e)=>[i,t,e];function $(i,t){i&1&&(r(0,"p",11),o(1,"\u231B Eligiendo palabra..."),s())}function H(i,t){if(i&1&&(r(0,"p",12),o(1),s()),i&2){let e=u();l("ngClass",E(2,J,e.mensajeFinal.includes("Ganaste"),e.mensajeFinal.includes("Perdiste"))),n(),p(" ",e.mensajeFinal," ")}}function Q(i,t){if(i&1){let e=g();r(0,"button",17),b("click",function(){let c=h(e).$implicit,x=u(3);return m(x.mostrarLetraElegida(c))}),o(1),s()}if(i&2){let e=t.$implicit,a=u(3);l("disabled",a.cargandoPalabra||a.letras.includes(e)||a.intentos===0),n(),p(" ",e," ")}}function B(i,t){if(i&1&&(r(0,"div",15),d(1,Q,2,2,"button",16),s()),i&2){let e=t.$implicit;n(),l("ngForOf",e)}}function G(i,t){if(i&1&&(r(0,"div",13),d(1,B,2,1,"div",14),s()),i&2){let e=u();n(),l("ngForOf",y(1,N,e.fila1,e.fila2,e.fila3))}}function W(i,t){if(i&1){let e=g();r(0,"button",18),b("click",function(){h(e);let c=u();return m(c.reiniciarJuego())}),o(1,"\u{1F504} Reiniciar Juego"),s()}}var T=class i{constructor(t,e){this.palabrasService=t;this.estadisticasService=e}canvasRef;ctx;fila1=["Q","W","E","R","T","Y","U","I","O","P"];fila2=["A","S","D","F","G","H","J","K","L"];fila3=["Z","X","C","V","B","N","M"];palabrasSecretas=[];palabraIngresada="";palabraOculta="";letras=[];errores=0;erroresMaximos=7;juegoActivo=!0;cargandoPalabra=!0;mensajeFinal="";intentos=3;puntuacion=0;ngOnInit(){this.cargandoPalabra=!0,this.palabrasService.getPalabrasSecretas().subscribe({next:t=>{this.palabrasSecretas=t.filter(e=>/^[a-zA-Z]+$/.test(e.toString())).map(e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toUpperCase()),this.palabrasSecretas.length>0?this.iniciarJuego():console.error("Error: No se recibieron palabras v\xE1lidas."),this.cargandoPalabra=!1},error:t=>{console.error("Error al obtener palabras:",t),this.cargandoPalabra=!1}})}ngAfterViewInit(){this.ctx=this.canvasRef.nativeElement.getContext("2d")}iniciarJuego(){if(this.palabrasSecretas.length===0){console.error("No hay palabras disponibles para jugar.");return}this.palabraIngresada=this.palabrasSecretas[Math.trunc(Math.random()*this.palabrasSecretas.length)],this.palabraOculta="_ ".repeat(this.palabraIngresada.length).trim(),this.letras=[],this.errores=0,this.juegoActivo=!0,console.log("Palabra seleccionada:",this.palabraIngresada),this.mensajeFinal="",this.limpiarAhorcado()}mostrarLetraElegida(t){this.juegoActivo&&(this.letras.includes(t)||this.letras.push(t),this.palabraIngresada.includes(t)?this.actualizarPalabraOculta(t):this.mostrarError(),this.informarResultadoDelJuego())}actualizarPalabraOculta(t){let e="";for(let a=0;a<this.palabraIngresada.length;a++)e+=this.palabraIngresada[a]===t?t:this.palabraOculta[a*2],e+=" ";this.palabraOculta=e.trim()}mostrarError(){this.errores<this.erroresMaximos?(this.dibujarHorca(),this.errores++,this.dibujarAhorcado()):this.errores>=this.erroresMaximos&&(this.intentos--,this.errores=0,this.intentos===0?(this.juegoActivo=!1,this.mensajeFinal=`Perdiste todos tus intentos! La \xFAltima palabra era: ${this.palabraIngresada}`):this.iniciarJuego())}informarResultadoDelJuego(){this.palabraOculta.includes("_")?this.errores>=this.erroresMaximos&&(this.juegoActivo=!1,this.intentos--,this.intentos===0?(this.mensajeFinal=`Perdiste todos tus intentos! Puntuaci\xF3n final: ${this.puntuacion}`,this.estadisticasService.guardarEstadistica(this.puntuacion,"Ahorcado")):this.mensajeFinal=`Perdiste un intento! La palabra era: ${this.palabraIngresada}`):(this.puntuacion+=this.palabraIngresada.length*10,this.juegoActivo=!1,this.mensajeFinal=`Ganaste! La palabra es: ${this.palabraIngresada}. Puntuaci\xF3n actual: ${this.puntuacion}`)}reiniciarJuego(){this.intentos=3,this.puntuacion=0,this.juegoActivo=!0,this.iniciarJuego()}limpiarAhorcado(){this.ctx.clearRect(0,0,200,250)}dibujarAhorcado(){let t=[()=>this.dibujarCabeza(150,80,20),()=>this.dibujarLineas(150,100,150,160),()=>this.dibujarLineas(150,110,130,140),()=>this.dibujarLineas(150,110,170,140),()=>this.dibujarLineas(150,160,130,190),()=>this.dibujarLineas(150,160,170,190),()=>this.dibujarLineas(120,100,180,100)];this.errores<=t.length&&t[this.errores-1]()}dibujarHorca(){let t=[()=>this.dibujarLineas(70,220,130,220),()=>this.dibujarLineas(100,50,100,220),()=>this.dibujarLineas(100,50,150,50),()=>this.dibujarLineas(150,50,150,60),()=>this.dibujarCabeza(150,80,20)];for(let e in t)t[e]()}dibujarCabeza(t,e,a){this.ctx.beginPath(),this.ctx.arc(t,e,a,0,Math.PI*2),this.ctx.strokeStyle="#FFFFFF",this.ctx.lineWidth=3,this.ctx.stroke()}dibujarLineas(t,e,a,c){this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.lineTo(a,c),this.ctx.strokeStyle="#FFFFFF",this.ctx.lineWidth=3,this.ctx.stroke()}static \u0275fac=function(e){return new(e||i)(_(f),_(D))};static \u0275cmp=I({type:i,selectors:[["app-ahorcado"]],viewQuery:function(e,a){if(e&1&&F(z,5),e&2){let c;P(c=A())&&(a.canvasRef=c.first)}},decls:22,vars:9,consts:[["hangmanCanvas",""],[1,"contenedor-ahorcado"],["width","200","height","250"],["class","contenedor-cargar-palabra",4,"ngIf"],["class","parrafo-resultados",3,"ngClass",4,"ngIf"],[1,"intentos"],[1,"puntuacion"],["class","teclado",4,"ngIf"],[1,"letras-usadas"],[1,"reset-btn",3,"click","disabled"],["class","reset-btn",3,"click",4,"ngIf"],[1,"contenedor-cargar-palabra"],[1,"parrafo-resultados",3,"ngClass"],[1,"teclado"],["class","fila",4,"ngFor","ngForOf"],[1,"fila"],["class","teclas",3,"disabled","click",4,"ngFor","ngForOf"],[1,"teclas",3,"click","disabled"],[1,"reset-btn",3,"click"]],template:function(e,a){if(e&1){let c=g();r(0,"div",1),S(1,"canvas",2,0),r(3,"h2"),o(4),s(),d(5,$,2,0,"p",3)(6,H,2,5,"p",4),r(7,"div",5)(8,"h3"),o(9),s()(),r(10,"div",6)(11,"h3"),o(12),s()(),d(13,G,2,5,"div",7),r(14,"div",8)(15,"h3"),o(16,"Letras usadas:"),s(),r(17,"p"),o(18),s()(),r(19,"button",9),b("click",function(){return h(c),m(a.iniciarJuego())}),o(20," Siguiente palabra "),s(),d(21,W,2,0,"button",10),s()}e&2&&(n(4),v(a.palabraOculta),n(),l("ngIf",a.cargandoPalabra),n(),l("ngIf",a.mensajeFinal),n(3),p("\u2764\uFE0F Intentos restantes: ",a.intentos,""),n(3),p("\u2B50 Puntuaci\xF3n: ",a.puntuacion,""),n(),l("ngIf",a.intentos>0),n(5),v(a.letras.join(", ")),n(),l("disabled",a.cargandoPalabra||a.intentos===0||a.juegoActivo),n(2),l("ngIf",a.intentos===0))},dependencies:[k,O,w,M],styles:[".teclado[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.fila[_ngcontent-%COMP%]{display:flex;gap:5px}.teclas[_ngcontent-%COMP%]{width:40px;height:40px;font-size:18px;text-align:center;cursor:pointer;border-radius:5px;background-color:#007bff;color:#fff;border:none}.teclas[_ngcontent-%COMP%]:active{background-color:#004085;transform:scale(.95)}.teclas[_ngcontent-%COMP%]:disabled{background-color:#6c757d;cursor:not-allowed}.teclas[_ngcontent-%COMP%]:hover{background-color:#0056b3}.contenedor-ahorcado[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh}.contenedor-cargar-palabra[_ngcontent-%COMP%]{text-align:center;display:flex;justify-content:center;align-items:center;width:100%}.mensaje-ganador[_ngcontent-%COMP%]{color:green;font-size:24px;font-weight:700;text-align:center}.mensaje-perdedor[_ngcontent-%COMP%]{color:red;font-size:24px;font-weight:700;text-align:center}"]})};export{T as a};
