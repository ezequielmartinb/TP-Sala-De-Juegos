import{a as L}from"./chunk-EDEC42IT.js";import{j as O,k as w,l as M,m as k}from"./chunk-7LMTQFKZ.js";import{$a as _,Ca as I,Ga as d,K as x,Na as c,P as C,Pa as r,Qa as o,Ra as F,Sa as g,Ta as b,Ua as u,W as h,Wa as P,X as m,Xa as S,Ya as A,_a as s,ab as p,gb as y,hb as E,sa as n,xa as j}from"./chunk-3UVLN3EJ.js";var f=class i{constructor(t){this.http=t}getPalabrasSecretas(){return this.http.get("https://random-word-api.herokuapp.com/all?lang=es")}static \u0275fac=function(e){return new(e||i)(C(L))};static \u0275prov=x({token:i,factory:i.\u0275fac,providedIn:"root"})};var R=["hangmanCanvas"],z=(i,t)=>({"mensaje-ganador":i,"mensaje-perdedor":t}),J=(i,t,e)=>[i,t,e];function N(i,t){i&1&&(r(0,"p",11),s(1,"\u231B Eligiendo palabra..."),o())}function $(i,t){if(i&1&&(r(0,"p",12),s(1),o()),i&2){let e=u();c("ngClass",y(2,z,e.mensajeFinal.includes("Ganaste"),e.mensajeFinal.includes("Perdiste"))),n(),p(" ",e.mensajeFinal," ")}}function H(i,t){if(i&1){let e=g();r(0,"button",17),b("click",function(){let l=h(e).$implicit,v=u(3);return m(v.mostrarLetraElegida(l))}),s(1),o()}if(i&2){let e=t.$implicit,a=u(3);c("disabled",a.cargandoPalabra||a.letras.includes(e)||a.intentos===0),n(),p(" ",e," ")}}function Q(i,t){if(i&1&&(r(0,"div",15),d(1,H,2,2,"button",16),o()),i&2){let e=t.$implicit;n(),c("ngForOf",e)}}function B(i,t){if(i&1&&(r(0,"div",13),d(1,Q,2,1,"div",14),o()),i&2){let e=u();n(),c("ngForOf",E(1,J,e.fila1,e.fila2,e.fila3))}}function G(i,t){if(i&1){let e=g();r(0,"button",18),b("click",function(){h(e);let l=u();return m(l.reiniciarJuego())}),s(1,"\u{1F504} Reiniciar Juego"),o()}}var D=class i{constructor(t){this.palabrasService=t}canvasRef;ctx;fila1=["Q","W","E","R","T","Y","U","I","O","P"];fila2=["A","S","D","F","G","H","J","K","L"];fila3=["Z","X","C","V","B","N","M"];palabrasSecretas=[];palabraIngresada="";palabraOculta="";letras=[];errores=0;erroresMaximos=7;juegoActivo=!0;cargandoPalabra=!0;mensajeFinal="";intentos=3;puntuacion=0;ngOnInit(){this.cargandoPalabra=!0,this.palabrasService.getPalabrasSecretas().subscribe({next:t=>{this.palabrasSecretas=t.filter(e=>/^[a-zA-Z]+$/.test(e.toString())).map(e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toUpperCase()),this.palabrasSecretas.length>0?this.iniciarJuego():console.error("Error: No se recibieron palabras v\xE1lidas."),this.cargandoPalabra=!1},error:t=>{console.error("Error al obtener palabras:",t),this.cargandoPalabra=!1}})}ngAfterViewInit(){this.ctx=this.canvasRef.nativeElement.getContext("2d")}iniciarJuego(){if(this.palabrasSecretas.length===0){console.error("No hay palabras disponibles para jugar.");return}this.palabraIngresada=this.palabrasSecretas[Math.trunc(Math.random()*this.palabrasSecretas.length)],this.palabraOculta="_ ".repeat(this.palabraIngresada.length).trim(),this.letras=[],this.errores=0,this.juegoActivo=!0,console.log("Palabra seleccionada:",this.palabraIngresada),this.mensajeFinal="",this.limpiarAhorcado()}mostrarLetraElegida(t){this.juegoActivo&&(this.letras.includes(t)||this.letras.push(t),this.palabraIngresada.includes(t)?this.actualizarPalabraOculta(t):this.mostrarError(),this.informarResultadoDelJuego())}actualizarPalabraOculta(t){let e="";for(let a=0;a<this.palabraIngresada.length;a++)e+=this.palabraIngresada[a]===t?t:this.palabraOculta[a*2],e+=" ";this.palabraOculta=e.trim()}mostrarError(){this.errores<this.erroresMaximos?(this.dibujarHorca(),this.errores++,this.dibujarAhorcado()):this.errores>=this.erroresMaximos&&(this.intentos--,this.errores=0,this.intentos===0?(this.juegoActivo=!1,this.mensajeFinal=`Perdiste todos tus intentos! La \xFAltima palabra era: ${this.palabraIngresada}`):this.iniciarJuego())}informarResultadoDelJuego(){this.palabraOculta.includes("_")?this.errores>=this.erroresMaximos&&(this.juegoActivo=!1,this.intentos--,this.intentos===0?this.mensajeFinal=`Perdiste todos tus intentos! Puntuaci\xF3n final: ${this.puntuacion}`:this.mensajeFinal=`Perdiste un intento! La palabra era: ${this.palabraIngresada}`):(this.puntuacion+=this.palabraIngresada.length*10,this.juegoActivo=!1,this.mensajeFinal=`Ganaste! La palabra es: ${this.palabraIngresada}. Puntuaci\xF3n actual: ${this.puntuacion}`)}reiniciarJuego(){this.intentos=3,this.puntuacion=0,this.juegoActivo=!0,this.iniciarJuego()}limpiarAhorcado(){this.ctx.clearRect(0,0,200,250)}dibujarAhorcado(){let t=[()=>this.dibujarCabeza(150,80,20),()=>this.dibujarLineas(150,100,150,160),()=>this.dibujarLineas(150,110,130,140),()=>this.dibujarLineas(150,110,170,140),()=>this.dibujarLineas(150,160,130,190),()=>this.dibujarLineas(150,160,170,190),()=>this.dibujarLineas(120,100,180,100)];this.errores<=t.length&&t[this.errores-1]()}dibujarHorca(){let t=[()=>this.dibujarLineas(70,220,130,220),()=>this.dibujarLineas(100,50,100,220),()=>this.dibujarLineas(100,50,150,50),()=>this.dibujarLineas(150,50,150,60),()=>this.dibujarCabeza(150,80,20)];for(let e in t)t[e]()}dibujarCabeza(t,e,a){this.ctx.beginPath(),this.ctx.arc(t,e,a,0,Math.PI*2),this.ctx.strokeStyle="#FFFFFF",this.ctx.lineWidth=3,this.ctx.stroke()}dibujarLineas(t,e,a,l){this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.lineTo(a,l),this.ctx.strokeStyle="#FFFFFF",this.ctx.lineWidth=3,this.ctx.stroke()}static \u0275fac=function(e){return new(e||i)(j(f))};static \u0275cmp=I({type:i,selectors:[["app-ahorcado"]],viewQuery:function(e,a){if(e&1&&P(R,5),e&2){let l;S(l=A())&&(a.canvasRef=l.first)}},decls:22,vars:9,consts:[["hangmanCanvas",""],[1,"contenedor-ahorcado"],["width","200","height","250"],["class","contenedor-cargar-palabra",4,"ngIf"],["class","parrafo-resultados",3,"ngClass",4,"ngIf"],[1,"intentos"],[1,"puntuacion"],["class","teclado",4,"ngIf"],[1,"letras-usadas"],[1,"reset-btn",3,"click","disabled"],["class","reset-btn",3,"click",4,"ngIf"],[1,"contenedor-cargar-palabra"],[1,"parrafo-resultados",3,"ngClass"],[1,"teclado"],["class","fila",4,"ngFor","ngForOf"],[1,"fila"],["class","teclas",3,"disabled","click",4,"ngFor","ngForOf"],[1,"teclas",3,"click","disabled"],[1,"reset-btn",3,"click"]],template:function(e,a){if(e&1){let l=g();r(0,"div",1),F(1,"canvas",2,0),r(3,"h2"),s(4),o(),d(5,N,2,0,"p",3)(6,$,2,5,"p",4),r(7,"div",5)(8,"h3"),s(9),o()(),r(10,"div",6)(11,"h3"),s(12),o()(),d(13,B,2,5,"div",7),r(14,"div",8)(15,"h3"),s(16,"Letras usadas:"),o(),r(17,"p"),s(18),o()(),r(19,"button",9),b("click",function(){return h(l),m(a.iniciarJuego())}),s(20," Siguiente palabra "),o(),d(21,G,2,0,"button",10),o()}e&2&&(n(4),_(a.palabraOculta),n(),c("ngIf",a.cargandoPalabra),n(),c("ngIf",a.mensajeFinal),n(3),p("\u2764\uFE0F Intentos restantes: ",a.intentos,""),n(3),p("\u2B50 Puntuaci\xF3n: ",a.puntuacion,""),n(),c("ngIf",a.intentos>0),n(5),_(a.letras.join(", ")),n(),c("disabled",a.cargandoPalabra||a.intentos===0||a.juegoActivo),n(2),c("ngIf",a.intentos===0))},dependencies:[k,O,w,M],styles:[".teclado[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.fila[_ngcontent-%COMP%]{display:flex;gap:5px}.teclas[_ngcontent-%COMP%]{width:40px;height:40px;font-size:18px;text-align:center;cursor:pointer;border-radius:5px;background-color:#007bff;color:#fff;border:none}.teclas[_ngcontent-%COMP%]:active{background-color:#004085;transform:scale(.95)}.teclas[_ngcontent-%COMP%]:disabled{background-color:#6c757d;cursor:not-allowed}.teclas[_ngcontent-%COMP%]:hover{background-color:#0056b3}.contenedor-ahorcado[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh}.contenedor-cargar-palabra[_ngcontent-%COMP%]{text-align:center;display:flex;justify-content:center;align-items:center;width:100%}.mensaje-ganador[_ngcontent-%COMP%]{color:green;font-size:24px;font-weight:700;text-align:center}.mensaje-perdedor[_ngcontent-%COMP%]{color:red;font-size:24px;font-weight:700;text-align:center}"]})};export{D as a};
