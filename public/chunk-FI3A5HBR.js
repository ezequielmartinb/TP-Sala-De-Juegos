import{a as E}from"./chunk-4ISWKOAP.js";import"./chunk-WI56FDBC.js";import{a as P}from"./chunk-R3ZJXQCB.js";import{k as J,l as M,n as S}from"./chunk-3UXFVKZA.js";import"./chunk-RYNEBBE2.js";import{Ca as b,Ha as p,Oa as u,Qa as n,Ra as i,Sa as v,Ta as h,W as d,Wa as f,X as g,Xa as m,bb as o,cb as C,db as _,qa as j,sa as s,xa as x}from"./chunk-LTGA3DLZ.js";import"./chunk-LJ5XHLMQ.js";import{h as l}from"./chunk-FK42CRUA.js";function T(r,e){if(r&1&&v(0,"img",6),r&2){let t=e.$implicit;u("src",t.image,j)}}function k(r,e){if(r&1){let t=h();n(0,"button",7),f("click",function(){d(t);let c=m();return g(c.pedirCarta())}),o(1,"Pedir Carta"),i()}}function I(r,e){if(r&1){let t=h();n(0,"button",7),f("click",function(){d(t);let c=m();return g(c.plantarJugador())}),o(1,"Plantarse"),i()}}function R(r,e){if(r&1&&v(0,"img",6),r&2){let t=e.$implicit;u("src",t.image,j)}}function O(r,e){if(r&1){let t=h();n(0,"div")(1,"h2"),o(2),i(),n(3,"button",7),f("click",function(){d(t);let c=m();return g(c.iniciarJuego())}),o(4),i()()}if(r&2){let t=m();s(2),C(t.mensajeResultado),s(2),_(" ",t.intentosRestantes>0?"Siguiente mano":"Reiniciar Juego"," ")}}var w=class r{constructor(e,t){this.cartasService=e;this.estadisticasService=t}cartasDisponibles=[];cartasJugador=[];cartasBanca=[];puntajeJugador=0;puntajeBanca=0;juegoTerminado=!1;mensajeResultado="";intentosRestantes=3;puntajeTotal=0;ngOnInit(){return l(this,null,function*(){yield this.iniciarJuego()})}iniciarJuego(){return l(this,null,function*(){this.intentosRestantes<=0&&(this.intentosRestantes=3,this.puntajeTotal=0),this.juegoTerminado=!1,this.mensajeResultado="";let e=yield this.cartasService.obtenerCartas();this.cartasDisponibles=e,this.cartasJugador=[this.obtenerCarta(),this.obtenerCarta()],this.cartasBanca=[this.obtenerCarta(),this.obtenerCarta()],this.actualizarPuntajes()})}obtenerCarta(){return this.cartasDisponibles.length>0?this.cartasDisponibles.shift():null}calcularValorCarta(e){return{ACE:11,KING:10,QUEEN:10,JACK:10,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10}[e.value]||0}calcularPuntaje(e){let t=e.reduce((c,y)=>c+this.calcularValorCarta(y),0),a=e.filter(c=>c.value==="ACE");for(;t>21&&a.length>0;)t-=10,a.pop();return t}pedirCarta(){return l(this,null,function*(){let e=this.obtenerCarta();e&&(this.cartasJugador.push(e),this.actualizarPuntajes()),this.puntajeJugador>21&&(this.juegoTerminado=!0,this.mensajeResultado="\xA1Te pasaste de 21! La banca gana.",this.intentosRestantes--)})}plantarJugador(){return l(this,null,function*(){for(;this.puntajeBanca<this.puntajeJugador&&this.puntajeBanca<21;){let e=this.obtenerCarta();e&&(this.cartasBanca.push(e),this.actualizarPuntajes())}this.juegoTerminado=!0,this.determinarGanador()})}actualizarPuntajes(){this.puntajeJugador=this.calcularPuntaje(this.cartasJugador),this.puntajeBanca=this.calcularPuntaje(this.cartasBanca)}determinarGanador(){this.puntajeBanca>21||this.puntajeJugador>this.puntajeBanca?(this.mensajeResultado="\xA1Ganaste!",this.puntajeTotal+=100):this.puntajeBanca===this.puntajeJugador?this.mensajeResultado="\xA1Empate!":(this.mensajeResultado="\xA1La banca gana!",this.intentosRestantes--,this.intentosRestantes===0&&this.estadisticasService.guardarEstadistica(this.puntajeTotal,"Blackjack"))}static \u0275fac=function(t){return new(t||r)(x(E),x(P))};static \u0275cmp=b({type:r,selectors:[["app-mi-juego"]],decls:28,vars:9,consts:[[1,"blackjack-container"],[1,"cartas-container"],[1,"cartas"],["alt","Carta",3,"src",4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[4,"ngIf"],["alt","Carta",3,"src"],[3,"click"]],template:function(t,a){t&1&&(n(0,"div",0)(1,"h1"),o(2,"Juego de Blackjack"),i(),n(3,"p"),o(4,"Intentos restantes: "),n(5,"strong"),o(6),i()(),n(7,"p"),o(8,"Puntaje acumulado: "),n(9,"strong"),o(10),i()(),n(11,"div",1)(12,"h2"),o(13,"Jugador"),i(),n(14,"div",2),p(15,T,1,1,"img",3),i(),n(16,"p"),o(17),i(),p(18,k,2,0,"button",4)(19,I,2,0,"button",4),i(),n(20,"div",1)(21,"h2"),o(22,"Banca"),i(),n(23,"div",2),p(24,R,1,1,"img",3),i(),n(25,"p"),o(26),i()(),p(27,O,5,2,"div",5),i()),t&2&&(s(6),C(a.intentosRestantes),s(4),C(a.puntajeTotal),s(5),u("ngForOf",a.cartasJugador),s(2),_("Puntaje: ",a.puntajeJugador,""),s(),u("ngIf",!a.juegoTerminado&&a.intentosRestantes>0),s(),u("ngIf",!a.juegoTerminado&&a.intentosRestantes>0),s(5),u("ngForOf",a.cartasBanca),s(2),_("Puntaje: ",a.puntajeBanca,""),s(),u("ngIf",a.juegoTerminado))},dependencies:[S,J,M],styles:[".blackjack-container[_ngcontent-%COMP%]{text-align:center;font-family:Arial,sans-serif;background-color:#107c10;color:#fff;padding:20px;border-radius:10px;box-shadow:0 4px 10px #0000004d;max-width:700px;margin:auto}h1[_ngcontent-%COMP%]{font-size:32px;margin-bottom:15px}h2[_ngcontent-%COMP%]{font-size:24px}p[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.cartas-container[_ngcontent-%COMP%]{margin:20px 0}.cartas[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px}img[_ngcontent-%COMP%]{width:120px;height:180px;border-radius:5px;box-shadow:0 4px 8px #00000080;transition:transform .3s ease-in-out}img[_ngcontent-%COMP%]:hover{transform:scale(1.1)}button[_ngcontent-%COMP%]{background-color:gold;color:#000;font-size:18px;padding:12px 15px;border:none;cursor:pointer;border-radius:5px;transition:all .3s ease-in-out;margin:5px}button[_ngcontent-%COMP%]:hover{background-color:orange}button[_ngcontent-%COMP%]:disabled{background-color:gray;cursor:not-allowed}.resultado[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:#ff0;text-shadow:2px 2px 4px rgba(0,0,0,.5)}"]})};export{w as MiJuegoComponent};
