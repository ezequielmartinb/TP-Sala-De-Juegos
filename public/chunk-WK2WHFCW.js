import{a as P}from"./chunk-SVQHVK7C.js";import{j,k as F,l as R,n as L}from"./chunk-3UXFVKZA.js";import{$a as C,Ca as A,Ha as d,Oa as l,Qa as r,Ra as s,Sa as E,Ta as g,W as h,Wa as f,X as m,Xa as u,Za as x,_a as v,bb as o,cb as b,db as p,ib as O,jb as S,sa as n,xa as I}from"./chunk-LTGA3DLZ.js";var M=["hangmanCanvas"],D=(i,t)=>({"mensaje-ganador":i,"mensaje-perdedor":t}),y=(i,t,e)=>[i,t,e];function J(i,t){i&1&&(r(0,"p",12),o(1,"\u231B Eligiendo palabra..."),s())}function N(i,t){if(i&1&&(r(0,"p",13),o(1),s()),i&2){let e=u();l("ngClass",O(2,D,e.mensajeFinal.includes("Ganaste"),e.mensajeFinal.includes("Perdiste"))),n(),p(" ",e.mensajeFinal," ")}}function w(i,t){if(i&1){let e=g();r(0,"button",18),f("click",function(){let c=h(e).$implicit,_=u(3);return m(_.mostrarLetraElegida(c))}),o(1),s()}if(i&2){let e=t.$implicit,a=u(3);l("disabled",a.cargandoPalabra||a.letras.includes(e)||a.intentos===0),n(),p(" ",e," ")}}function k(i,t){if(i&1&&(r(0,"div",16),d(1,w,2,2,"button",17),s()),i&2){let e=t.$implicit;n(),l("ngForOf",e)}}function V(i,t){if(i&1&&(r(0,"div",14),d(1,k,2,1,"div",15),s()),i&2){let e=u();n(),l("ngForOf",S(1,y,e.fila1,e.fila2,e.fila3))}}function U(i,t){if(i&1&&(r(0,"h2",19),o(1),s()),i&2){let e=u();n(),p(" Se acabaron las palabras. Tu puntaje es: ",e.puntuacion," ")}}function z(i,t){if(i&1){let e=g();r(0,"button",20),f("click",function(){h(e);let c=u();return m(c.reiniciarJuego())}),o(1,"\u{1F504} Reiniciar Juego"),s()}}var T=class i{constructor(t){this.estadisticasService=t}canvasRef;ctx;fila1=["Q","W","E","R","T","Y","U","I","O","P"];fila2=["A","S","D","F","G","H","J","K","L"];fila3=["Z","X","C","V","B","N","M"];palabrasSecretas=["RELAMPAGO","SUSURRO","ESPEJISMO","RELOJ","LABERINTO","HORIZONTE","CRISTAL","MELODIA","TORMENTA","ECLIPSE","REFLEJO","DESTELLO","RUIDO","INFINITO","SOMBRA","OLVIDO","RAIZ","ABISMO","FANTASIA","CENIZA","VIENTO","DESVELO","RELATO","ESTRATEGIA","SILENCIO","ENCANTO","EFIMERO","NOSTALGIA","MISTERIO","AURORA","RASTRO","UMBRAL","DISTANCIA","FRAGANCIA","SUSPIRO","MURMULLO","VERSO","CIELO","IMPETU","QUIMERA","CLARIDAD","ALBOR","ECO","EUFORIA","LATIDO","ESENCIA","FUGAZ","ANHELO","CREPUSCULO","ETER"];palabraIngresada="";palabraOculta="";letras=[];errores=0;erroresMaximos=7;juegoActivo=!0;cargandoPalabra=!0;mensajeFinal="";intentos=3;puntuacion=0;palabrasJugadas=[];finDelJuego=!1;ngOnInit(){this.palabrasSecretas.length>0?(this.cargandoPalabra=!1,this.palabrasSecretas,this.iniciarJuego()):console.error("Error: No se recibieron palabras v\xE1lidas.")}ngAfterViewInit(){this.ctx=this.canvasRef.nativeElement.getContext("2d")}iniciarJuego(){if(this.palabrasSecretas.length===0){console.error("No hay palabras disponibles para jugar.");return}let t=this.palabrasSecretas.filter(e=>!this.palabrasJugadas.includes(e));if(t.length===0){this.finDelJuego=!0,this.estadisticasService.guardarEstadistica(this.puntuacion,"Ahorcado");return}this.palabraIngresada=t[Math.trunc(Math.random()*t.length)],this.palabraOculta="_ ".repeat(this.palabraIngresada.length).trim(),this.letras=[],this.errores=0,this.juegoActivo=!0,console.log("Palabra seleccionada:",this.palabraIngresada),this.mensajeFinal="",this.palabrasJugadas.push(this.palabraIngresada),this.limpiarAhorcado()}mostrarLetraElegida(t){this.juegoActivo&&(this.letras.includes(t)||this.letras.push(t),this.palabraIngresada.includes(t)?this.actualizarPalabraOculta(t):this.mostrarError(),this.informarResultadoDelJuego())}actualizarPalabraOculta(t){let e="";for(let a=0;a<this.palabraIngresada.length;a++)e+=this.palabraIngresada[a]===t?t:this.palabraOculta[a*2],e+=" ";this.palabraOculta=e.trim()}mostrarError(){this.errores<this.erroresMaximos?(this.dibujarHorca(),this.errores++,this.dibujarAhorcado()):this.errores>=this.erroresMaximos&&(this.intentos--,this.errores=0,this.intentos===0?(this.juegoActivo=!1,this.mensajeFinal=`\xA1Perdiste todos tus intentos! La \xFAltima palabra era: ${this.palabraIngresada}`):this.iniciarJuego())}informarResultadoDelJuego(){this.palabraOculta.includes("_")?this.errores>=this.erroresMaximos&&(this.juegoActivo=!1,this.intentos--,this.intentos===0?(this.mensajeFinal=`Perdiste todos tus intentos! Puntuaci\xF3n final: ${this.puntuacion}`,this.estadisticasService.guardarEstadistica(this.puntuacion,"Ahorcado")):this.mensajeFinal=`Perdiste un intento! La palabra era: ${this.palabraIngresada}`):(this.puntuacion+=this.palabraIngresada.length*10,this.juegoActivo=!1,this.mensajeFinal=`Ganaste! La palabra es: ${this.palabraIngresada}. Puntuaci\xF3n actual: ${this.puntuacion}`)}reiniciarJuego(){this.intentos=3,this.puntuacion=0,this.finDelJuego=!1,this.palabrasJugadas=[],this.juegoActivo=!0,this.iniciarJuego()}limpiarAhorcado(){this.ctx.clearRect(0,0,200,250)}dibujarAhorcado(){let t=[()=>this.dibujarCabeza(150,80,20),()=>this.dibujarLineas(150,100,150,160),()=>this.dibujarLineas(150,110,130,140),()=>this.dibujarLineas(150,110,170,140),()=>this.dibujarLineas(150,160,130,190),()=>this.dibujarLineas(150,160,170,190),()=>this.dibujarLineas(120,100,180,100)];this.errores<=t.length&&t[this.errores-1]()}dibujarHorca(){let t=[()=>this.dibujarLineas(70,220,130,220),()=>this.dibujarLineas(100,50,100,220),()=>this.dibujarLineas(100,50,150,50),()=>this.dibujarLineas(150,50,150,60),()=>this.dibujarCabeza(150,80,20)];for(let e in t)t[e]()}dibujarCabeza(t,e,a){this.ctx.beginPath(),this.ctx.arc(t,e,a,0,Math.PI*2),this.ctx.strokeStyle="#FFFFFF",this.ctx.lineWidth=3,this.ctx.stroke()}dibujarLineas(t,e,a,c){this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.lineTo(a,c),this.ctx.strokeStyle="#FFFFFF",this.ctx.lineWidth=3,this.ctx.stroke()}static \u0275fac=function(e){return new(e||i)(I(P))};static \u0275cmp=A({type:i,selectors:[["app-ahorcado"]],viewQuery:function(e,a){if(e&1&&x(M,5),e&2){let c;v(c=C())&&(a.canvasRef=c.first)}},decls:23,vars:10,consts:[["hangmanCanvas",""],[1,"contenedor-ahorcado"],["width","200","height","250"],["class","contenedor-cargar-palabra",4,"ngIf"],["class","parrafo-resultados",3,"ngClass",4,"ngIf"],[1,"intentos"],[1,"puntuacion"],["class","teclado",4,"ngIf"],[1,"letras-usadas"],["class","mensaje-final",4,"ngIf"],[1,"reset-btn",3,"click","disabled"],["class","reset-btn",3,"click",4,"ngIf"],[1,"contenedor-cargar-palabra"],[1,"parrafo-resultados",3,"ngClass"],[1,"teclado"],["class","fila",4,"ngFor","ngForOf"],[1,"fila"],["class","teclas",3,"disabled","click",4,"ngFor","ngForOf"],[1,"teclas",3,"click","disabled"],[1,"mensaje-final"],[1,"reset-btn",3,"click"]],template:function(e,a){if(e&1){let c=g();r(0,"div",1),E(1,"canvas",2,0),r(3,"h2"),o(4),s(),d(5,J,2,0,"p",3)(6,N,2,5,"p",4),r(7,"div",5)(8,"h3"),o(9),s()(),r(10,"div",6)(11,"h3"),o(12),s()(),d(13,V,2,5,"div",7),r(14,"div",8)(15,"h3"),o(16,"Letras usadas:"),s(),r(17,"p"),o(18),s()(),d(19,U,2,1,"h2",9),r(20,"button",10),f("click",function(){return h(c),m(a.iniciarJuego())}),o(21," Siguiente palabra "),s(),d(22,z,2,0,"button",11),s()}e&2&&(n(4),b(a.palabraOculta),n(),l("ngIf",a.cargandoPalabra),n(),l("ngIf",a.mensajeFinal),n(3),p("\u2764\uFE0F Intentos restantes: ",a.intentos,""),n(3),p("\u2B50 Puntuaci\xF3n: ",a.puntuacion,""),n(),l("ngIf",a.intentos>0),n(5),b(a.letras.join(", ")),n(),l("ngIf",a.finDelJuego),n(),l("disabled",a.cargandoPalabra||a.intentos===0||a.juegoActivo||a.finDelJuego),n(2),l("ngIf",a.intentos===0||a.finDelJuego))},dependencies:[L,j,F,R],styles:[".teclado[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.fila[_ngcontent-%COMP%]{display:flex;gap:5px}.teclas[_ngcontent-%COMP%]{width:40px;height:40px;font-size:18px;text-align:center;cursor:pointer;border-radius:5px;background-color:#007bff;color:#fff;border:none}.teclas[_ngcontent-%COMP%]:active{background-color:#004085;transform:scale(.95)}.teclas[_ngcontent-%COMP%]:disabled{background-color:#6c757d;cursor:not-allowed}.teclas[_ngcontent-%COMP%]:hover{background-color:#0056b3}.contenedor-ahorcado[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh}.contenedor-cargar-palabra[_ngcontent-%COMP%]{text-align:center;display:flex;justify-content:center;align-items:center;width:100%}.mensaje-ganador[_ngcontent-%COMP%]{color:green;font-size:24px;font-weight:700;text-align:center}.mensaje-perdedor[_ngcontent-%COMP%]{color:red;font-size:24px;font-weight:700;text-align:center}"]})};export{T as a};
