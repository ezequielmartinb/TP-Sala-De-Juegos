import{a as E}from"./chunk-4ISWKOAP.js";import"./chunk-WI56FDBC.js";import{a as P}from"./chunk-SVQHVK7C.js";import{k as J,l as M,n as S}from"./chunk-3UXFVKZA.js";import"./chunk-RYNEBBE2.js";import{Ca as b,Ha as l,Oa as u,Qa as i,Ra as r,Sa as v,Ta as f,W as g,Wa as C,X as h,Xa as p,bb as o,cb as _,db as d,qa as x,sa as s,xa as j}from"./chunk-LTGA3DLZ.js";import"./chunk-LJ5XHLMQ.js";import{h as m}from"./chunk-FK42CRUA.js";function k(a,e){if(a&1&&v(0,"img",6),a&2){let t=e.$implicit;u("src",t.image,x)}}function I(a,e){if(a&1){let t=f();i(0,"button",7),C("click",function(){g(t);let c=p();return h(c.pedirCarta())}),o(1,"Pedir Carta"),r()}}function R(a,e){if(a&1){let t=f();i(0,"button",7),C("click",function(){g(t);let c=p();return h(c.plantarJugador())}),o(1,"Plantarse"),r()}}function T(a,e){if(a&1&&v(0,"img",6),a&2){let t=e.$implicit;u("src",t.image,x)}}function O(a,e){if(a&1&&(i(0,"h2"),o(1),r()),a&2){let t=p(2);s(),d("\u{1F3AF}\xA1Juego terminado! Puntaje final: ",t.puntuacion,"")}}function B(a,e){if(a&1){let t=f();i(0,"div")(1,"h2"),o(2),r(),l(3,O,2,1,"h2",5),i(4,"button",7),C("click",function(){g(t);let c=p();return h(c.iniciarJuego())}),o(5),r()()}if(a&2){let t=p();s(2),_(t.mensajeResultado),s(),u("ngIf",t.intentosRestantes==0),s(2),d(" ",t.intentosRestantes>0?"Siguiente mano":"Reiniciar Juego"," ")}}var y=class a{constructor(e,t){this.cartasService=e;this.estadisticasService=t}cartasDisponibles=[];cartasJugador=[];cartasBanca=[];puntajeJugador=0;puntajeBanca=0;juegoTerminado=!1;mensajeResultado="";intentosRestantes=3;puntuacion=0;ngOnInit(){return m(this,null,function*(){yield this.iniciarJuego()})}iniciarJuego(){return m(this,null,function*(){this.intentosRestantes<=0&&(this.intentosRestantes=3,this.puntuacion=0),this.juegoTerminado=!1,this.mensajeResultado="";let e=yield this.cartasService.obtenerCartas();this.cartasDisponibles=e,this.cartasJugador=[this.obtenerCarta(),this.obtenerCarta()],this.cartasBanca=[this.obtenerCarta(),this.obtenerCarta()],this.actualizarPuntajes()})}obtenerCarta(){return this.cartasDisponibles.length>0?this.cartasDisponibles.shift():null}calcularValorCarta(e){return{ACE:11,KING:10,QUEEN:10,JACK:10,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10}[e.value]||0}calcularPuntaje(e){let t=e.reduce((c,w)=>c+this.calcularValorCarta(w),0),n=e.filter(c=>c.value==="ACE");for(;t>21&&n.length>0;)t-=10,n.pop();return t}pedirCarta(){return m(this,null,function*(){let e=this.obtenerCarta();e&&(this.cartasJugador.push(e),this.actualizarPuntajes()),this.puntajeJugador>21&&(this.juegoTerminado=!0,this.mensajeResultado="\xA1Te pasaste de 21! La banca gana.",this.intentosRestantes--)})}plantarJugador(){return m(this,null,function*(){for(;this.puntajeBanca<this.puntajeJugador&&this.puntajeBanca<21;){let e=this.obtenerCarta();e&&(this.cartasBanca.push(e),this.actualizarPuntajes())}this.juegoTerminado=!0,this.determinarGanador()})}actualizarPuntajes(){this.puntajeJugador=this.calcularPuntaje(this.cartasJugador),this.puntajeBanca=this.calcularPuntaje(this.cartasBanca)}determinarGanador(){this.puntajeBanca>21||this.puntajeJugador>this.puntajeBanca?(this.mensajeResultado="\xA1Ganaste!",this.puntuacion+=this.puntajeJugador*10):this.puntajeBanca===this.puntajeJugador?this.mensajeResultado="\xA1Empate!":(this.mensajeResultado="\xA1La banca gana!",this.intentosRestantes--,this.intentosRestantes===0&&this.estadisticasService.guardarEstadistica(this.puntuacion,"Blackjack"))}static \u0275fac=function(t){return new(t||a)(j(E),j(P))};static \u0275cmp=b({type:a,selectors:[["app-mi-juego"]],decls:28,vars:9,consts:[[1,"blackjack-container"],[1,"cartas-container"],[1,"cartas"],["alt","Carta",3,"src",4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[4,"ngIf"],["alt","Carta",3,"src"],[3,"click"]],template:function(t,n){t&1&&(i(0,"div",0)(1,"h1"),o(2,"Juego de Blackjack"),r(),i(3,"p"),o(4,"Intentos restantes: "),i(5,"strong"),o(6),r()(),i(7,"p"),o(8,"Puntaje acumulado: "),i(9,"strong"),o(10),r()(),i(11,"div",1)(12,"h2"),o(13,"Jugador"),r(),i(14,"div",2),l(15,k,1,1,"img",3),r(),i(16,"p"),o(17),r(),l(18,I,2,0,"button",4)(19,R,2,0,"button",4),r(),i(20,"div",1)(21,"h2"),o(22,"Banca"),r(),i(23,"div",2),l(24,T,1,1,"img",3),r(),i(25,"p"),o(26),r()(),l(27,B,6,3,"div",5),r()),t&2&&(s(6),_(n.intentosRestantes),s(4),_(n.puntuacion),s(5),u("ngForOf",n.cartasJugador),s(2),d("Puntaje: ",n.puntajeJugador,""),s(),u("ngIf",!n.juegoTerminado&&n.intentosRestantes>0),s(),u("ngIf",!n.juegoTerminado&&n.intentosRestantes>0),s(5),u("ngForOf",n.cartasBanca),s(2),d("Puntaje: ",n.puntajeBanca,""),s(),u("ngIf",n.juegoTerminado))},dependencies:[S,J,M],styles:[".blackjack-container[_ngcontent-%COMP%]{text-align:center;font-family:Arial,sans-serif;background-color:#107c10;color:#fff;padding:20px;border-radius:10px;box-shadow:0 4px 10px #0000004d;max-width:700px;margin:auto}h1[_ngcontent-%COMP%]{font-size:32px;margin-bottom:15px}h2[_ngcontent-%COMP%]{font-size:24px}p[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.cartas-container[_ngcontent-%COMP%]{margin:20px 0}.cartas[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px}img[_ngcontent-%COMP%]{width:120px;height:180px;border-radius:5px;box-shadow:0 4px 8px #00000080;transition:transform .3s ease-in-out}img[_ngcontent-%COMP%]:hover{transform:scale(1.1)}button[_ngcontent-%COMP%]{background-color:gold;color:#000;font-size:18px;padding:12px 15px;border:none;cursor:pointer;border-radius:5px;transition:all .3s ease-in-out;margin:5px}button[_ngcontent-%COMP%]:hover{background-color:orange}button[_ngcontent-%COMP%]:disabled{background-color:gray;cursor:not-allowed}.resultado[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:#ff0;text-shadow:2px 2px 4px rgba(0,0,0,.5)}"]})};export{y as MiJuegoComponent};
