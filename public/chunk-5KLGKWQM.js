import{a as j}from"./chunk-5F4ITDE2.js";import{l as E,n as R}from"./chunk-3O2RVLND.js";import{Ca as k,Ha as d,K as y,Oa as c,P as M,Qa as s,Ra as i,Sa as _,Ta as v,W as h,Wa as p,X as C,Xa as l,bb as o,cb as x,db as u,qa as b,sa as r,xa as I}from"./chunk-ZFR65RDR.js";import{h as f}from"./chunk-FK42CRUA.js";var g=class n{constructor(e){this.http=e}apiUrl="https://deckofcardsapi.com/api/deck/new/shuffle/?deck_count=1";deckId="";iniciarBaraja(){return f(this,null,function*(){let e=yield this.http.get(this.apiUrl).toPromise();this.deckId=e.deck_id})}obtenerCartas(){return f(this,null,function*(){return yield this.iniciarBaraja(),(yield this.http.get(`https://deckofcardsapi.com/api/deck/${this.deckId}/draw/?count=52`).toPromise()).cards})}static \u0275fac=function(t){return new(t||n)(M(j))};static \u0275prov=y({token:n,factory:n.\u0275fac,providedIn:"root"})};function w(n,e){if(n&1&&(s(0,"p"),o(1),i()),n&2){let t=l();r(),x(t.mensajeCarga)}}function P(n,e){if(n&1&&_(0,"img",9),n&2){let t=l();c("src",t.cartaVisible.image,b)}}function z(n,e){if(n&1){let t=v();s(0,"button",10),p("click",function(){h(t);let m=l();return C(m.continuarJuego())}),o(1,"Continuar"),i()}}function J(n,e){if(n&1){let t=v();s(0,"button",10),p("click",function(){h(t);let m=l();return C(m.reiniciarJuego())}),o(1,"\u{1F504} Reiniciar"),i()}}function B(n,e){if(n&1&&(s(0,"div",11)(1,"p")(2,"strong"),o(3,"Puntuaci\xF3n:"),i(),o(4),i()()),n&2){let t=l();r(4),u(" ",t.puntos,"")}}function O(n,e){if(n&1&&(s(0,"div",11)(1,"h3"),o(2,"\u{1F3AF} \xA1Juego terminado!"),i(),s(3,"p")(4,"strong"),o(5,"Puntuaci\xF3n final:"),i(),o(6),i()()),n&2){let t=l();r(6),u(" ",t.puntos,"")}}var T=class n{constructor(e){this.cartasService=e}cartas=[];cartaVisible;cartaTapada;cartaRevelada="";resultado="";seleccionRealizada=!1;cargandoCartas=!1;mensajeCarga="";intentosRestantes=3;puntos=0;mostrarBotonContinuar=!1;ngOnInit(){this.cargarCartas()}cargarCartas(){this.cargandoCartas=!0,this.mensajeCarga="\u231B Barajando cartas...",this.cartasService.obtenerCartas().then(e=>{this.cartas=e.filter(t=>t.code),this.cartas.length>1?this.iniciarJuego():console.error("Error: No se recibieron cartas v\xE1lidas."),this.cargandoCartas=!1,this.mensajeCarga=""}).catch(e=>{console.error("Error al obtener cartas:",e),this.cargandoCartas=!1})}iniciarJuego(){if(this.intentosRestantes<=0||this.cartas.length<2){this.finalizarJuego();return}console.log(this.cartas),this.resultado="",this.cartaRevelada="",this.seleccionRealizada=!1,this.mostrarBotonContinuar=!1;let e=Math.floor(Math.random()*this.cartas.length);this.cartaVisible=this.cartas[e],this.cartas.splice(e,1);let t=Math.floor(Math.random()*this.cartas.length);this.cartaTapada=this.cartas[t],this.cartas.splice(t,1),console.log(this.cartaVisible),console.log(this.cartaTapada)}evaluarEleccion(e){if(this.seleccionRealizada||this.intentosRestantes<=0)return;this.seleccionRealizada=!0;let t=this.obtenerValor(this.cartaVisible.value),a=this.obtenerValor(this.cartaTapada.value);t===a?this.resultado="\u{1F91D} \xA1Empate! Las cartas tienen el mismo valor.":e==="mayor"&&t>a||e==="menor"&&t<a?(this.resultado="\u2705 \xA1Correcto!",this.puntos+=2):(this.resultado="\u274C Incorrecto, intenta de nuevo.",this.intentosRestantes--),this.cartaRevelada=this.cartaTapada.image,this.mostrarBotonContinuar=!0}continuarJuego(){this.mostrarBotonContinuar=!1,this.iniciarJuego()}finalizarJuego(){console.log(`\u{1F3AF} \xA1Juego terminado! Puntuaci\xF3n final: ${this.puntos}`),this.intentosRestantes=0,this.mostrarBotonContinuar=!1}obtenerValor(e){let t={JACK:11,QUEEN:12,KING:13,ACE:14};return t[e]!==void 0?t[e]:parseInt(e,10)}reiniciarJuego(){this.intentosRestantes=3,this.puntos=0,this.cartas=[],this.mostrarBotonContinuar=!1,this.resultado="",this.cartaRevelada="",this.seleccionRealizada=!1,this.cargarCartas()}static \u0275fac=function(t){return new(t||n)(I(g))};static \u0275cmp=k({type:n,selectors:[["app-mayormenor"]],decls:22,vars:11,consts:[[1,"contenedor-juego"],[4,"ngIf"],[1,"cartas"],["alt","Carta visible",3,"src",4,"ngIf"],["alt","Carta tapada",3,"src"],[1,"botones"],[3,"click","disabled"],[3,"click",4,"ngIf"],["class","mensaje-final",4,"ngIf"],["alt","Carta visible",3,"src"],[3,"click"],[1,"mensaje-final"]],template:function(t,a){t&1&&(s(0,"div",0)(1,"h2"),o(2,"Mayor o Menor"),i(),d(3,w,2,1,"p",1),s(4,"div",2),d(5,P,1,1,"img",3),_(6,"img",4),i(),s(7,"div",5)(8,"button",6),p("click",function(){return a.evaluarEleccion("mayor")}),o(9,"Mayor"),i(),s(10,"button",6),p("click",function(){return a.evaluarEleccion("menor")}),o(11,"Menor"),i(),d(12,z,2,0,"button",7)(13,J,2,0,"button",7),i(),s(14,"p"),o(15),i(),s(16,"p")(17,"strong"),o(18,"Intentos restantes:"),i(),o(19),i(),d(20,B,5,1,"div",8)(21,O,7,1,"div",8),i()),t&2&&(r(3),c("ngIf",a.mensajeCarga),r(2),c("ngIf",a.cartaVisible),r(),c("src",a.cartaRevelada||"https://deckofcardsapi.com/static/img/back.png",b),r(2),c("disabled",a.seleccionRealizada||a.cargandoCartas),r(2),c("disabled",a.seleccionRealizada||a.cargandoCartas),r(2),c("ngIf",a.mostrarBotonContinuar&&a.intentosRestantes>0),r(),c("ngIf",a.intentosRestantes<=0),r(2),x(a.resultado),r(4),u(" ",a.intentosRestantes,""),r(),c("ngIf",a.intentosRestantes>0),r(),c("ngIf",a.intentosRestantes<=0))},dependencies:[R,E],styles:[".contenedor-juego[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}.cartas[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:10px}.cartas[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:140px;height:auto;border-radius:8px}button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:12px 20px;font-size:18px;font-weight:700;cursor:pointer;border-radius:8px;transition:all .3s ease-in-out}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.botones[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px;margin-top:15px}"]})};export{T as MayormenorComponent};
