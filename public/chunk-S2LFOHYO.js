import{a as R}from"./chunk-WI56FDBC.js";import{a as w}from"./chunk-SVQHVK7C.js";import{k as y,l as M,n as O}from"./chunk-3UXFVKZA.js";import"./chunk-RYNEBBE2.js";import{Ca as b,Ha as d,K as x,Oa as c,P,Qa as o,Ra as a,Sa as C,Ta as v,W as f,Wa as _,X as g,Xa as l,ab as I,bb as n,cb as E,db as p,qa as S,sa as s,xa as h}from"./chunk-LTGA3DLZ.js";import"./chunk-LJ5XHLMQ.js";import"./chunk-FK42CRUA.js";var u=class i{constructor(t){this.http=t}apiUrl="https://restcountries.com/v3.1/all";getPaises(){return this.http.get(this.apiUrl)}static \u0275fac=function(e){return new(e||i)(P(R))};static \u0275prov=x({token:i,factory:i.\u0275fac,providedIn:"root"})};function A(i,t){if(i&1){let e=v();o(0,"div")(1,"button",9,0),_("click",function(){let m=f(e).$implicit,T=I(2),F=l(2);return g(F.verificarRespuesta(m,T))}),n(3),a()()}if(i&2){let e=t.$implicit;s(3),p(" ",e.name," ")}}function z(i,t){if(i&1){let e=v();o(0,"button",10),_("click",function(){f(e);let m=l(2);return g(m.reiniciarJuego())}),n(1,"\u{1F504} Reiniciar"),a()}}function U(i,t){if(i&1&&(o(0,"div",3),C(1,"img",4),o(2,"p",5),n(3,"Tiempo restante: "),o(4,"strong"),n(5),a()(),o(6,"p",6),n(7,"Puntuaci\xF3n acumulada: "),o(8,"strong"),n(9),a()(),d(10,A,4,1,"div",7),o(11,"p")(12,"strong"),n(13,"Intentos restantes:"),a(),n(14),a(),d(15,z,2,0,"button",8),a()),i&2){let e=l();s(),c("src",e.paisSeleccionado.flag,S)("alt",e.paisSeleccionado.name),s(4),p("",e.tiempoRestante,"s"),s(4),E(e.puntuacion),s(),c("ngForOf",e.opciones),s(4),p(" ",e.intentosRestantes,""),s(),c("ngIf",e.intentosRestantes===0)}}function V(i,t){if(i&1&&(o(0,"div",11)(1,"h3"),n(2,"\u{1F3AF} \xA1Juego terminado!"),a(),o(3,"p")(4,"strong"),n(5,"Puntuaci\xF3n final:"),a(),n(6),a()()),i&2){let e=l();s(6),p(" ",e.puntuacion,"")}}var k=class i{constructor(t,e){this.paisesService=t;this.estadisticasService=e;this.paisSeleccionado=this.elegirUnPais()}listadoPaises=[];paisSeleccionado;opciones=[];respuestaSeleccionada=!1;tiempoRestante=10;intervalo;puntuacion=0;intentosRestantes=3;ngOnInit(){this.paisesService.getPaises().subscribe(t=>{this.listadoPaises=t.map(e=>({name:e.translations?.spa?.common||e.name.common,flag:e.flags?.png||""})),this.iniciarJuego()})}elegirUnPais(){let t=Math.floor(Math.random()*this.listadoPaises.length);return this.listadoPaises[t]}iniciarJuego(){if(this.listadoPaises.length<3)return;this.paisSeleccionado=this.elegirUnPais();let t=new Set;for(t.add(this.paisSeleccionado);t.size<3;){let e=this.elegirUnPais();t.add(e)}setTimeout(()=>{document.querySelectorAll("button.opcion").forEach(e=>{e.removeAttribute("disabled"),e.classList.remove("correcto","incorrecto")})}),this.opciones=Array.from(t).sort(()=>Math.random()-.5),this.respuestaSeleccionada=!1,console.log(this.paisSeleccionado.name),this.iniciarTemporizador()}iniciarTemporizador(){this.tiempoRestante=10,this.intervalo=setInterval(()=>{this.tiempoRestante>0?this.tiempoRestante--:this.seleccionarOpcionErronea()},1e3)}verificarRespuesta(t,e){this.respuestaSeleccionada||(this.respuestaSeleccionada=!0,clearInterval(this.intervalo),t.name===this.paisSeleccionado.name?(this.puntuacion+=5,this.continuarJuego()):(this.intentosRestantes--,this.continuarJuego(),this.intentosRestantes===0&&this.estadisticasService.guardarEstadistica(this.puntuacion,"Preguntados")),e.classList.add(t.name===this.paisSeleccionado.name?"correcto":"incorrecto"),document.querySelectorAll("button.opcion").forEach(r=>r.setAttribute("disabled","true")))}seleccionarOpcionErronea(){clearInterval(this.intervalo);let t=this.opciones.find(e=>e.name!==this.paisSeleccionado.name);t&&this.verificarRespuesta(t,document.querySelector("button.opcion"))}reiniciarJuego(){this.puntuacion=0,this.intentosRestantes=3,this.respuestaSeleccionada=!1,clearInterval(this.intervalo),this.iniciarJuego()}continuarJuego(){this.intentosRestantes>0&&this.iniciarJuego()}static \u0275fac=function(e){return new(e||i)(h(u),h(w))};static \u0275cmp=b({type:i,selectors:[["app-preguntados"]],decls:4,vars:2,consts:[["boton",""],["class","contenedor-pregunta",4,"ngIf"],["class","resultado-final",4,"ngIf"],[1,"contenedor-pregunta"],[3,"src","alt"],[1,"timer"],[1,"puntuacion"],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[1,"opcion",3,"click"],[3,"click"],[1,"resultado-final"]],template:function(e,r){e&1&&(o(0,"h1"),n(1,"\xBFA qu\xE9 pa\xEDs pertenece esta bandera?"),a(),d(2,U,16,7,"div",1)(3,V,7,1,"div",2)),e&2&&(s(2),c("ngIf",r.paisSeleccionado),s(),c("ngIf",r.intentosRestantes===0))},dependencies:[O,y,M],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;text-align:center;background-color:#4caf50;color:#fff}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{text-align:center}img[_ngcontent-%COMP%]{display:block;margin:0 auto;width:200px;height:auto;border-radius:10px;box-shadow:3px 3px 10px #0000004d}.contenedor-pregunta[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:15px}button[_ngcontent-%COMP%]{width:200px;padding:10px;font-size:1.2rem;border-radius:20px;cursor:pointer;border:none;transition:background-color .3s ease,transform .2s ease}button[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.correcto[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.incorrecto[_ngcontent-%COMP%]{background-color:#f44336!important;color:#fff}button[_ngcontent-%COMP%]:disabled{cursor:not-allowed}.timer[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#ff5722}.puntuacion[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.resultado-final[_ngcontent-%COMP%]{text-align:center;padding:20px;font-size:1.5rem}"]})};export{k as PreguntadosComponent};
