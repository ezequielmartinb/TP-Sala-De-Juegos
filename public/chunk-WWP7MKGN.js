import{a as w}from"./chunk-LFMEQYWG.js";import"./chunk-5F4ITDE2.js";import{k as J,l as M,n as P}from"./chunk-3O2RVLND.js";import{Ca as v,Ha as p,Oa as u,Qa as n,Ra as i,Sa as j,Ta as h,W as d,Wa as f,X as g,Xa as m,bb as o,cb as C,db as _,qa as x,sa as s,xa as b}from"./chunk-ZFR65RDR.js";import{h as l}from"./chunk-FK42CRUA.js";function T(r,t){if(r&1&&j(0,"img",6),r&2){let e=t.$implicit;u("src",e.image,x)}}function E(r,t){if(r&1){let e=h();n(0,"button",7),f("click",function(){d(e);let c=m();return g(c.pedirCarta())}),o(1,"Pedir Carta"),i()}}function k(r,t){if(r&1){let e=h();n(0,"button",7),f("click",function(){d(e);let c=m();return g(c.plantarJugador())}),o(1,"Plantarse"),i()}}function I(r,t){if(r&1&&j(0,"img",6),r&2){let e=t.$implicit;u("src",e.image,x)}}function O(r,t){if(r&1){let e=h();n(0,"div")(1,"h2"),o(2),i(),n(3,"button",7),f("click",function(){d(e);let c=m();return g(c.iniciarJuego())}),o(4),i()()}if(r&2){let e=m();s(2),C(e.mensajeResultado),s(2),_(" ",e.intentosRestantes>0?"Siguiente mano":"Reiniciar Juego"," ")}}var y=class r{constructor(t){this.cartasService=t}cartasDisponibles=[];cartasJugador=[];cartasBanca=[];puntajeJugador=0;puntajeBanca=0;juegoTerminado=!1;mensajeResultado="";intentosRestantes=5;puntajeTotal=0;ngOnInit(){return l(this,null,function*(){yield this.iniciarJuego()})}iniciarJuego(){return l(this,null,function*(){this.intentosRestantes<=0&&(this.intentosRestantes=5,this.puntajeTotal=0),this.juegoTerminado=!1,this.mensajeResultado="";let t=yield this.cartasService.obtenerCartas();this.cartasDisponibles=t,this.cartasJugador=[this.obtenerCarta(),this.obtenerCarta()],this.cartasBanca=[this.obtenerCarta(),this.obtenerCarta()],this.actualizarPuntajes()})}obtenerCarta(){return this.cartasDisponibles.length>0?this.cartasDisponibles.shift():null}calcularValorCarta(t){return{ACE:11,KING:10,QUEEN:10,JACK:10,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10}[t.value]||0}calcularPuntaje(t){let e=t.reduce((c,S)=>c+this.calcularValorCarta(S),0),a=t.filter(c=>c.value==="ACE");for(;e>21&&a.length>0;)e-=10,a.pop();return e}pedirCarta(){return l(this,null,function*(){let t=this.obtenerCarta();t&&(this.cartasJugador.push(t),this.actualizarPuntajes()),this.puntajeJugador>21&&(this.juegoTerminado=!0,this.mensajeResultado="\xA1Te pasaste de 21! La banca gana.",this.intentosRestantes--)})}plantarJugador(){return l(this,null,function*(){for(;this.puntajeBanca<this.puntajeJugador&&this.puntajeBanca<21;){let t=this.obtenerCarta();t&&(this.cartasBanca.push(t),this.actualizarPuntajes())}this.juegoTerminado=!0,this.determinarGanador()})}actualizarPuntajes(){this.puntajeJugador=this.calcularPuntaje(this.cartasJugador),this.puntajeBanca=this.calcularPuntaje(this.cartasBanca)}determinarGanador(){this.puntajeBanca>21||this.puntajeJugador>this.puntajeBanca?(this.mensajeResultado="\xA1Ganaste!",this.puntajeTotal+=100):this.puntajeBanca===this.puntajeJugador?this.mensajeResultado="\xA1Empate!":(this.mensajeResultado="\xA1La banca gana!",this.intentosRestantes--)}static \u0275fac=function(e){return new(e||r)(b(w))};static \u0275cmp=v({type:r,selectors:[["app-mi-juego"]],decls:28,vars:9,consts:[[1,"blackjack-container"],[1,"cartas-container"],[1,"cartas"],["alt","Carta",3,"src",4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[4,"ngIf"],["alt","Carta",3,"src"],[3,"click"]],template:function(e,a){e&1&&(n(0,"div",0)(1,"h1"),o(2,"Juego de Blackjack"),i(),n(3,"p"),o(4,"Intentos restantes: "),n(5,"strong"),o(6),i()(),n(7,"p"),o(8,"Puntaje acumulado: "),n(9,"strong"),o(10),i()(),n(11,"div",1)(12,"h2"),o(13,"Jugador"),i(),n(14,"div",2),p(15,T,1,1,"img",3),i(),n(16,"p"),o(17),i(),p(18,E,2,0,"button",4)(19,k,2,0,"button",4),i(),n(20,"div",1)(21,"h2"),o(22,"Banca"),i(),n(23,"div",2),p(24,I,1,1,"img",3),i(),n(25,"p"),o(26),i()(),p(27,O,5,2,"div",5),i()),e&2&&(s(6),C(a.intentosRestantes),s(4),C(a.puntajeTotal),s(5),u("ngForOf",a.cartasJugador),s(2),_("Puntaje: ",a.puntajeJugador,""),s(),u("ngIf",!a.juegoTerminado&&a.intentosRestantes>0),s(),u("ngIf",!a.juegoTerminado&&a.intentosRestantes>0),s(5),u("ngForOf",a.cartasBanca),s(2),_("Puntaje: ",a.puntajeBanca,""),s(),u("ngIf",a.juegoTerminado))},dependencies:[P,J,M],styles:[".blackjack-container[_ngcontent-%COMP%]{text-align:center;font-family:Arial,sans-serif;background-color:#107c10;color:#fff;padding:20px;border-radius:10px;box-shadow:0 4px 10px #0000004d;max-width:700px;margin:auto}h1[_ngcontent-%COMP%]{font-size:32px;margin-bottom:15px}h2[_ngcontent-%COMP%]{font-size:24px}p[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.cartas-container[_ngcontent-%COMP%]{margin:20px 0}.cartas[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px}img[_ngcontent-%COMP%]{width:120px;height:180px;border-radius:5px;box-shadow:0 4px 8px #00000080;transition:transform .3s ease-in-out}img[_ngcontent-%COMP%]:hover{transform:scale(1.1)}button[_ngcontent-%COMP%]{background-color:gold;color:#000;font-size:18px;padding:12px 15px;border:none;cursor:pointer;border-radius:5px;transition:all .3s ease-in-out;margin:5px}button[_ngcontent-%COMP%]:hover{background-color:orange}button[_ngcontent-%COMP%]:disabled{background-color:gray;cursor:not-allowed}.resultado[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:#ff0;text-shadow:2px 2px 4px rgba(0,0,0,.5)}"]})};export{y as MiJuegoComponent};
