import{d as _}from"./chunk-UDEZESVP.js";import{a as b,b as h}from"./chunk-H25SF227.js";import"./chunk-LJ5XHLMQ.js";import{a as S,b as E,c as L,d as k}from"./chunk-IJJ7C6Q5.js";import{a as y}from"./chunk-BZLA3WPT.js";import"./chunk-4JRDNEFN.js";import"./chunk-VJLT3EIH.js";import{Ca as C,Pa as i,Qa as o,Ra as c,Ta as d,Za as s,_a as M,bb as g,cb as p,db as u,jb as w,sa as a,xa as l}from"./chunk-XNZRBX6S.js";import{h as v}from"./chunk-FK42CRUA.js";var A=b(h.apiUrl,h.publicAnonKey),I=class f{constructor(n,t,e){this.router=n;this.cd=t;this.authService=e}username="";password="";errorMessage="";login(){return v(this,null,function*(){if(!this.authService.isValidEmail(this.username)){this.errorMessage="Ingrese un correo electr\xF3nico v\xE1lido";return}try{let{data:n,error:t}=yield A.auth.signInWithPassword({email:this.username,password:this.password});if(t){this.errorMessage=this.getErrorMessage(t.message);return}this.cd.detectChanges(),this.authService.setUsuario(this.username),this.router.navigate(["/home"])}catch{this.errorMessage="Error inesperado al iniciar sesi\xF3n"}})}getErrorMessage(n){return{"Invalid login credentials":"Credenciales inv\xE1lidas","missing email or phone":"Ingrese username"}[n]||`Error inesperado: ${n}`}quickAcess(){this.username="ezequielmartinb10@gmail.com",this.password="123456",this.cd.detectChanges()}static \u0275fac=function(t){return new(t||f)(l(_),l(w),l(y))};static \u0275cmp=C({type:f,selectors:[["app-login"]],decls:17,vars:3,consts:[["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"contenedor-login"],[1,"formulario-login"],["type","text","placeholder","Username",3,"ngModelChange","ngModel"],["type","password","placeholder","Password",3,"ngModelChange","ngModel"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-link",3,"click"],[1,"error-msg"]],template:function(t,e){t&1&&(i(0,"head"),c(1,"meta",0)(2,"meta",1),i(3,"title"),s(4,"Login"),o()(),i(5,"div",2)(6,"div",3)(7,"input",4),u("ngModelChange",function(r){return p(e.username,r)||(e.username=r),r}),o(),c(8,"br"),i(9,"input",5),u("ngModelChange",function(r){return p(e.password,r)||(e.password=r),r}),o(),c(10,"br"),i(11,"button",6),d("click",function(){return e.login()}),s(12,"Iniciar sesi\xF3n"),o(),i(13,"button",7),d("click",function(){return e.quickAcess()}),s(14,"Acceso r\xE1pido"),o()()(),i(15,"div",8),s(16),o()),t&2&&(a(7),g("ngModel",e.username),a(2),g("ngModel",e.password),a(7),M(e.errorMessage))},dependencies:[k,S,E,L],encapsulation:2})};export{I as LoginComponent};
