import{a as O}from"./chunk-WI56FDBC.js";import{a as R}from"./chunk-23ELWQX3.js";import{k as y,l as E,n as M}from"./chunk-3UXFVKZA.js";import"./chunk-RYNEBBE2.js";import{Ca as C,Ha as f,K as x,Oa as c,P,Qa as r,Ra as n,Sa as S,Ta as g,W as u,Wa as _,X as m,Xa as l,ab as I,bb as o,db as d,qa as b,sa as a,xa as v}from"./chunk-LTGA3DLZ.js";import"./chunk-LJ5XHLMQ.js";import"./chunk-FK42CRUA.js";var h=class i{constructor(t){this.http=t}apiUrl="https://restcountries.com/v3.1/all";getPaises(){return this.http.get(this.apiUrl)}static \u0275fac=function(e){return new(e||i)(P(O))};static \u0275prov=x({token:i,factory:i.\u0275fac,providedIn:"root"})};function A(i,t){if(i&1){let e=g();r(0,"div")(1,"button",8,0),_("click",function(){let p=u(e).$implicit,k=I(2),T=l(2);return m(T.verificarRespuesta(p,k))}),o(3),n()()}if(i&2){let e=t.$implicit;a(3),d(" ",e.name," ")}}function J(i,t){if(i&1){let e=g();r(0,"button",9),_("click",function(){u(e);let p=l(2);return m(p.continuarJuego())}),o(1,"\u25B6\uFE0F Continuar"),n()}}function V(i,t){if(i&1){let e=g();r(0,"button",9),_("click",function(){u(e);let p=l(2);return m(p.reiniciarJuego())}),o(1,"\u{1F504} Reiniciar"),n()}}function z(i,t){if(i&1&&(r(0,"div",3),S(1,"img",4),r(2,"p",5),o(3,"Tiempo restante: "),r(4,"strong"),o(5),n()(),f(6,A,4,1,"div",6),r(7,"p")(8,"strong"),o(9,"Intentos restantes:"),n(),o(10),n(),f(11,J,2,0,"button",7)(12,V,2,0,"button",7),n()),i&2){let e=l();a(),c("src",e.paisSeleccionado.flag,b)("alt",e.paisSeleccionado.name),a(4),d("",e.tiempoRestante,"s"),a(),c("ngForOf",e.opciones),a(4),d(" ",e.intentosRestantes,""),a(),c("ngIf",e.respuestaSeleccionada&&e.intentosRestantes>0),a(),c("ngIf",e.intentosRestantes===0)}}function U(i,t){if(i&1&&(r(0,"div",10)(1,"h3"),o(2,"\u{1F3AF} \xA1Juego terminado!"),n(),r(3,"p")(4,"strong"),o(5,"Puntuaci\xF3n final:"),n(),o(6),n()()),i&2){let e=l();a(6),d(" ",e.puntuacion,"")}}var w=class i{constructor(t,e){this.paisesService=t;this.estadisticasService=e;this.paisSeleccionado=this.elegirUnPais()}listadoPaises=[];paisSeleccionado;opciones=[];respuestaSeleccionada=!1;tiempoRestante=10;intervalo;puntuacion=0;intentosRestantes=3;ngOnInit(){this.paisesService.getPaises().subscribe(t=>{this.listadoPaises=t.map(e=>({name:e.translations?.spa?.common||e.name.common,flag:e.flags?.png||""})),this.iniciarJuego()})}elegirUnPais(){let t=Math.floor(Math.random()*this.listadoPaises.length);return this.listadoPaises[t]}iniciarJuego(){if(this.listadoPaises.length<3)return;this.paisSeleccionado=this.elegirUnPais();let t=new Set;for(t.add(this.paisSeleccionado);t.size<3;){let e=this.elegirUnPais();t.add(e)}setTimeout(()=>{document.querySelectorAll("button.opcion").forEach(e=>{e.removeAttribute("disabled"),e.classList.remove("correcto","incorrecto")})}),this.opciones=Array.from(t).sort(()=>Math.random()-.5),this.respuestaSeleccionada=!1,this.iniciarTemporizador()}iniciarTemporizador(){this.tiempoRestante=10,this.intervalo=setInterval(()=>{this.tiempoRestante>0?this.tiempoRestante--:this.seleccionarPrimeraOpcion()},1e3)}verificarRespuesta(t,e){this.respuestaSeleccionada||(this.respuestaSeleccionada=!0,clearInterval(this.intervalo),t.name===this.paisSeleccionado.name?this.puntuacion+=5:(this.intentosRestantes--,this.intentosRestantes===0&&this.estadisticasService.guardarEstadistica(this.puntuacion,"Preguntados")),e.classList.add(t.name===this.paisSeleccionado.name?"correcto":"incorrecto"),document.querySelectorAll("button.opcion").forEach(s=>s.setAttribute("disabled","true")))}seleccionarPrimeraOpcion(){clearInterval(this.intervalo);let t=this.opciones[0];this.verificarRespuesta(t,document.querySelector("button.opcion"))}reiniciarJuego(){this.puntuacion=0,this.intentosRestantes=3,this.respuestaSeleccionada=!1,clearInterval(this.intervalo),this.iniciarJuego()}continuarJuego(){this.intentosRestantes>0&&this.iniciarJuego()}static \u0275fac=function(e){return new(e||i)(v(h),v(R))};static \u0275cmp=C({type:i,selectors:[["app-preguntados"]],decls:4,vars:2,consts:[["boton",""],["class","contenedor-pregunta",4,"ngIf"],["class","resultado-final",4,"ngIf"],[1,"contenedor-pregunta"],[3,"src","alt"],[1,"timer"],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[1,"opcion",3,"click"],[3,"click"],[1,"resultado-final"]],template:function(e,s){e&1&&(r(0,"h1"),o(1,"\xBFA qu\xE9 pa\xEDs pertenece esta bandera?"),n(),f(2,z,13,7,"div",1)(3,U,7,1,"div",2)),e&2&&(a(2),c("ngIf",s.paisSeleccionado),a(),c("ngIf",s.intentosRestantes===0))},dependencies:[M,y,E],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;text-align:center;background-color:#4caf50;color:#fff}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{text-align:center}img[_ngcontent-%COMP%]{display:block;margin:0 auto;width:200px;height:auto;border-radius:10px;box-shadow:3px 3px 10px #0000004d}.contenedor-pregunta[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:15px}button[_ngcontent-%COMP%]{width:200px;padding:10px;font-size:1.2rem;border-radius:20px;cursor:pointer;border:none;transition:background-color .3s ease,transform .2s ease}button[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.correcto[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.incorrecto[_ngcontent-%COMP%]{background-color:#f44336!important;color:#fff}button[_ngcontent-%COMP%]:disabled{cursor:not-allowed}.timer[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#ff5722}.resultado-final[_ngcontent-%COMP%]{text-align:center;padding:20px;font-size:1.5rem}"]})};export{w as PreguntadosComponent};
