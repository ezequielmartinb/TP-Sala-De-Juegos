import{j as O,k as E,l as w,r as L}from"./chunk-RC5RGOYE.js";import{$a as y,Ca as j,Ga as d,K as _,Na as c,P as x,Pa as r,Qa as n,Ra as I,Sa as m,Ta as b,Ua as g,W as u,Wa as P,X as h,Xa as S,Ya as F,Za as l,_a as f,eb as A,sa as o,xa as C}from"./chunk-NBVEKDWB.js";var p=class i{constructor(a){this.http=a}getPalabrasSecretas(){return this.http.get("https://random-word-api.herokuapp.com/all?lang=es")}static \u0275fac=function(e){return new(e||i)(x(L))};static \u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})};var T=["hangmanCanvas"],V=(i,a,e)=>[i,a,e];function N(i,a){i&1&&(r(0,"p",8),l(1,"\u231B Eligiendo palabra..."),n())}function D(i,a){if(i&1){let e=m();r(0,"button",11),b("click",function(){let s=u(e).$implicit,v=g(2);return h(v.mostrarLetraElegida(s))}),l(1),n()}if(i&2){let e=a.$implicit,t=g(2);c("disabled",t.cargandoPalabra||t.letras.includes(e)),o(),y(" ",e," ")}}function z(i,a){if(i&1&&(r(0,"div",9),d(1,D,2,2,"button",10),n()),i&2){let e=a.$implicit;o(),c("ngForOf",e)}}var M=class i{constructor(a){this.palabrasService=a}canvasRef;ctx;fila1=["Q","W","E","R","T","Y","U","I","O","P"];fila2=["A","S","D","F","G","H","J","K","L"];fila3=["Z","X","C","V","B","N","M"];palabrasSecretas=[];palabraIngresada="";palabraOculta="";letras=[];errores=0;erroresMaximos=11;juegoActivo=!0;cargandoPalabra=!0;ngOnInit(){this.cargandoPalabra=!0,this.palabrasService.getPalabrasSecretas().subscribe({next:a=>{this.palabrasSecretas=a.filter(e=>!e.includes(" ")&&!e.includes("-")&&!e.includes(".")&&!e.includes("!")).map(e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toUpperCase()),this.palabrasSecretas.length>0?this.iniciarJuego():console.error("Error: No se recibieron palabras v\xE1lidas."),this.cargandoPalabra=!1},error:a=>{console.error("Error al obtener palabras:",a),this.cargandoPalabra=!1}})}ngAfterViewInit(){this.ctx=this.canvasRef.nativeElement.getContext("2d")}iniciarJuego(){if(this.palabrasSecretas.length===0){console.error("No hay palabras disponibles para jugar.");return}let a=this.palabrasSecretas.filter(e=>!e.includes(" ")&&!e.includes("-")&&!e.includes(".")&&!e.includes("!")).map(e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,""));if(a.length===0){console.error("No quedan palabras v\xE1lidas despu\xE9s del filtrado.");return}this.palabraIngresada=a[Math.trunc(Math.random()*a.length)],this.palabraOculta="_ ".repeat(this.palabraIngresada.length).trim(),this.letras=[],this.errores=0,this.juegoActivo=!0,console.log("Palabra seleccionada sin acentos y sin espacios:",this.palabraIngresada),this.limpiarAhorcado()}mostrarLetraElegida(a){this.juegoActivo&&(this.letras.includes(a)||this.letras.push(a),this.palabraIngresada.includes(a)?this.actualizarPalabraOculta(a):this.mostrarError(),this.informarResultadoDelJuego())}actualizarPalabraOculta(a){let e="";for(let t=0;t<this.palabraIngresada.length;t++)e+=this.palabraIngresada[t]===a?a:this.palabraOculta[t*2],e+=" ";this.palabraOculta=e.trim()}mostrarError(){this.errores<this.erroresMaximos&&(this.errores++,this.dibujarAhorcado())}informarResultadoDelJuego(){this.palabraOculta.includes("_")?this.errores>=this.erroresMaximos&&(this.juegoActivo=!1,setTimeout(()=>alert(`Perdiste! La palabra era: ${this.palabraIngresada}`),300)):(this.juegoActivo=!1,setTimeout(()=>alert(`Ganaste! La palabra es: ${this.palabraIngresada}`),300))}limpiarAhorcado(){this.ctx.clearRect(0,0,200,250)}dibujarAhorcado(){let a=[()=>this.dibujarLineas(70,220,130,220),()=>this.dibujarLineas(100,50,100,220),()=>this.dibujarLineas(100,50,150,50),()=>this.dibujarLineas(150,50,150,60),()=>this.dibujarCabeza(150,80,20),()=>this.dibujarLineas(150,100,150,160),()=>this.dibujarLineas(150,110,130,140),()=>this.dibujarLineas(150,110,170,140),()=>this.dibujarLineas(150,160,130,190),()=>this.dibujarLineas(150,160,170,190),()=>this.dibujarLineas(120,100,180,100)];this.errores<=a.length&&a[this.errores-1]()}dibujarCabeza(a,e,t){this.ctx.beginPath(),this.ctx.arc(a,e,t,0,Math.PI*2),this.ctx.strokeStyle="#FFFFFF",this.ctx.lineWidth=3,this.ctx.stroke()}dibujarLineas(a,e,t,s){this.ctx.beginPath(),this.ctx.moveTo(a,e),this.ctx.lineTo(t,s),this.ctx.strokeStyle="#FFFFFF",this.ctx.lineWidth=3,this.ctx.stroke()}static \u0275fac=function(e){return new(e||i)(C(p))};static \u0275cmp=j({type:i,selectors:[["app-ahorcado"]],viewQuery:function(e,t){if(e&1&&P(T,5),e&2){let s;S(s=F())&&(t.canvasRef=s.first)}},decls:15,vars:9,consts:[["hangmanCanvas",""],[1,"contenedor-ahorcado"],["width","200","height","250"],["class","contenedor-cargar-palabra",4,"ngIf"],[1,"teclado"],["class","fila",4,"ngFor","ngForOf"],[1,"letras-usadas"],[1,"reset-btn",3,"click","disabled"],[1,"contenedor-cargar-palabra"],[1,"fila"],["class","teclas",3,"disabled","click",4,"ngFor","ngForOf"],[1,"teclas",3,"click","disabled"]],template:function(e,t){if(e&1){let s=m();r(0,"div",1),I(1,"canvas",2,0),r(3,"h2"),l(4),n(),d(5,N,2,0,"p",3),r(6,"div",4),d(7,z,2,1,"div",5),n(),r(8,"div",6)(9,"h3"),l(10,"Letras usadas:"),n(),r(11,"p"),l(12),n()(),r(13,"button",7),b("click",function(){return u(s),h(t.iniciarJuego())}),l(14,"Reiniciar Juego"),n()()}e&2&&(o(4),f(t.palabraOculta),o(),c("ngIf",t.cargandoPalabra),o(2),c("ngForOf",A(5,V,t.fila1,t.fila2,t.fila3)),o(5),f(t.letras.join(", ")),o(),c("disabled",t.cargandoPalabra))},dependencies:[w,O,E],styles:[".teclado[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.fila[_ngcontent-%COMP%]{display:flex;gap:5px}.teclas[_ngcontent-%COMP%]{width:40px;height:40px;font-size:18px;text-align:center;cursor:pointer;border-radius:5px;background-color:#007bff;color:#fff;border:none}.teclas[_ngcontent-%COMP%]:active{background-color:#004085;transform:scale(.95)}.teclas[_ngcontent-%COMP%]:disabled{background-color:#6c757d;cursor:not-allowed}.teclas[_ngcontent-%COMP%]:hover{background-color:#0056b3}.contenedor-cargar-palabra[_ngcontent-%COMP%]{text-align:center;display:flex;justify-content:center;align-items:center;height:100%}"]})};export{M as a};
