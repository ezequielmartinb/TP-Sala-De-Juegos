import{d as M}from"./chunk-UDEZESVP.js";import{a as C,b as d}from"./chunk-H25SF227.js";import"./chunk-LJ5XHLMQ.js";import{a as _,b,c as R,d as E}from"./chunk-IJJ7C6Q5.js";import{a as S}from"./chunk-BZLA3WPT.js";import"./chunk-4JRDNEFN.js";import"./chunk-VJLT3EIH.js";import{Ca as v,Pa as s,Qa as n,Ra as m,Ta as w,Za as o,_a as y,bb as u,cb as p,db as c,sa as a,xa as l}from"./chunk-XNZRBX6S.js";import{h as g}from"./chunk-FK42CRUA.js";var U=C(d.apiUrl,d.publicAnonKey),T=class h{constructor(e,t){this.router=e;this.authService=t;this.username="",this.password="",this.message="",this.messageType="",this.errorMessage=""}username;password;message;messageType;errorMessage;register(){return g(this,null,function*(){if(!this.authService.isValidEmail(this.username)){this.errorMessage="Ingrese un correo electr\xF3nico v\xE1lido";return}try{let{error:e}=yield U.auth.signUp({email:this.username,password:this.password});if(e){this.errorMessage=this.getErrorMessage(e.message);return}this.saveUserData(this.username,this.password)}catch{this.errorMessage="Error inesperado al registrar usuario"}})}getErrorMessage(e){return{"Password should be at least 6 characters.":"La contrase\xF1a debe tener al menos 6 caracteres","Signup requires a valid password":"Ingrese una contrase\xF1a v\xE1lida","Anonymous sign-ins are disabled":"Ingrese un usuario y contrase\xF1a v\xE1lidos","User already registered":"El usuario que quiere registrar ya existe"}[e]||`Error inesperado: ${e}`}saveUserData(e,t){return g(this,null,function*(){let{error:r}=yield U.from("usuarios").insert([{username:e,password:t}]);r?(this.message="Hubo un error al registrar el usuario",this.messageType="error",console.error(r.message)):(this.message="Usuario registrado correctamente",this.authService.setUsuario(e),this.messageType="success",this.router.navigate(["/home"]))})}static \u0275fac=function(t){return new(t||h)(l(M),l(S))};static \u0275cmp=v({type:h,selectors:[["app-registro"]],decls:17,vars:3,consts:[["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"contenedor-login"],[1,"formulario-login"],["type","text","placeholder","Username",1,"register-input",3,"ngModelChange","ngModel"],["type","password","placeholder","Password",1,"register-input",3,"ngModelChange","ngModel"],[1,"btn","btn-success",3,"click"],[1,"error-msg"]],template:function(t,r){t&1&&(s(0,"head"),m(1,"meta",0)(2,"meta",1),s(3,"title"),o(4,"Registro"),n()(),s(5,"h1"),o(6,"Registrate"),n(),s(7,"div",2)(8,"div",3)(9,"input",4),c("ngModelChange",function(i){return p(r.username,i)||(r.username=i),i}),n(),m(10,"br"),s(11,"input",5),c("ngModelChange",function(i){return p(r.password,i)||(r.password=i),i}),n(),m(12,"br"),s(13,"button",6),w("click",function(){return r.register()}),o(14,"Registro"),n()()(),s(15,"div",7),o(16),n()),t&2&&(a(9),u("ngModel",r.username),a(2),u("ngModel",r.password),a(5),y(r.errorMessage))},dependencies:[E,_,b,R],encapsulation:2})};export{T as RegistroComponent};
